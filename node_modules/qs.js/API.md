
# 拟定接口

## 基础函数

### qs
### stream

```
qs(body).stream("click").onValue( () => { cosole.log('click')});
qs.stream( (callback) => {
    var val = 0;
    setInterval( () => {
        callback(val++);
    });
}).onValue( (val) => { cosole.log(val) });
```

### map

```
var addStream = qs(".add")
.stream("click")
.map(1)
.scan(0, (sum, val) => (sum + val))
.assign('.counter', 'text');

```

### assign

对赋值操作的一个简化函数, 这个函数目前待确定，虽然对于编写代码的思维连贯性有辅助，但是如果对代码量影响较大的话，也不会实现该函数

改造前
```
var addStream = qs(".add")
.stream("click")
.map(1)
.scan(0, (sum, val) => (sum + val))
.onValue((val) => {
    counter.innerText = val;
});
```

改造后

```
var addStream = qs(".add")
.stream("click")
.map(1)
.scan(0, (sum, val) => (sum + val))
.assign('.counter', 'text');

```



### filter

```
qs("li")
.stream("click")
.map((e) => e.target)
.filter((li) => {
    return li.dataset.readed === false;
}).onValue((list) => {
    //show list
})
```

### debounce  降低频率

```
qs(window)
.stream("resize")
.debounce(300) //虽然窗口大小调整resize事件触发极快，但是将触发的频率降低为300ms一次
.onValue((e) => {
    //处理
});
```

### removeDuplicate

移除重复

### reduce


```
var adder = qs(".add").stream("click").map(1).take(5).reduce(0, (sum, val) =>( sum + val)); //5
```

### onValue
收到值

```
//根据用户名和密码两个输入框的状态来决定注册按钮的状态
userName.and(password).onValue(function (enalbed) {
    registerButton.attr('disabled', !enabled);
});
```

### take

例如用来限制按钮只可以点击一次。

```
qs(".btn-vote")
.stream("click")
.take(1)
.assign(".btn-vote", "attr", "disabled")
.onValue(function () {
    return ajax("/vote");
}).onValue(function () {
    
})
```

### takeUntil
### takeWhile
### delay

## 异步操作

### wait 等待
### done 异步加载成功
### fail 异步加载失败

## 逻辑操作

### and
### or
### not
