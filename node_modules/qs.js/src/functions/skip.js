import {createStreamConstructor, createPropertyConstructor} from './common';



const mixin = {
    init({n}) {
        this._n = Math.max(0, n);//保证用户输入负数是无效的。
    },

    _handleValue(x) {
        if (this._n === 0) {
            this.emitValue(x);
        } else {
            this._n--;
        }
    }
};

const S = createStreamConstructor('skip', mixin);
const P = createPropertyConstructor('skip', mixin);

function skip(source, n) {
    return new (source._ofSameType(S, P))(source, {n});
}

export default skip;