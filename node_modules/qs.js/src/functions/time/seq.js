import {createTimeBaseStreamConstructor as createTBSConstructor} from '../common';


const SeqStream = createTBSConstructor('seq', {
    init({arr}) {
        this._d = arr;
    },

    _free() {
        this._d = null;
    },

    _onTick() {
        if (this._d.length === 1) {
            this.emitValue(this._d[0]);
            this.emitEnd();
        } else {
            this.emitValue(this._d.shift());
        }
    }
});

module.exports = function seq(wait, arr) {
    return new SeqStream(wait, {arr});
};