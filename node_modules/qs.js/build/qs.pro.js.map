{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///qs.pro.js","webpack:///webpack/bootstrap e6b65f97fb6d028726d3","webpack:///./src/qs.js","webpack:///./src/functions/common.js","webpack:///./src/polyfill/extend.js","webpack:///./src/constants/events.js","webpack:///./src/Stream.js","webpack:///./src/constants/common.js","webpack:///./src/polyfill/list.js","webpack:///./src/obserable.js","webpack:///./src/functions/never.js","webpack:///./src/emitter.js","webpack:///./src/Property.js","webpack:///./src/dispatcher.js","webpack:///./src/polyfill/now.js","webpack:///./src/connect/common.js","webpack:///./src/functions/map.js","webpack:///./src/functions/skipDuplicates.js","webpack:///./src/functions/toProperty.js","webpack:///./src/connect/flatMap.js","webpack:///./src/functions/constant.js","webpack:///./src/functions/debounce.js","webpack:///./src/functions/delay.js","webpack:///./src/functions/filter.js","webpack:///./src/functions/flatten.js","webpack:///./src/functions/last.js","webpack:///./src/functions/scan.js","webpack:///./src/functions/skip.js","webpack:///./src/functions/skipWhile.js","webpack:///./src/functions/static/fromEvents.js","webpack:///./src/functions/static/fromPromise.js","webpack:///./src/functions/take.js","webpack:///./src/functions/takeWhile.js","webpack:///./src/functions/throttle.js","webpack:///./src/functions/time/delay.js","webpack:///./src/functions/time/interval.js","webpack:///./src/functions/time/seq.js","webpack:///./src/polyfill/bind.js","webpack:///./src/polyfill/isArray.js","webpack:///./src/polyfill/isFunction.js","webpack:///./src/polyfill/toArray.js","webpack:///./src/stream.js","webpack:///./src/connect/merge.js","webpack:///./src/functions/mapError.js","webpack:///./src/connect/awaiting.js","webpack:///./src/connect/buffer.js","webpack:///./src/connect/combine.js","webpack:///./src/connect/connectTwoSource.js","webpack:///./src/connect/zip.js","webpack:///./src/utils/spread.js"],"names":["root","factory","exports","module","define","amd","a","i","this","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","_interopRequireDefault","obj","__esModule","default","qs","fn","_Stream2","_isFunction","_toArray","_toArray2","_common","_obserable","_obserable2","_emitter","_extend","_extend2","_Stream","_map2","_map3","_mapError2","_mapError3","_filter2","_filter3","_take2","_take3","_takeWhile2","_takeWhile3","_debounce2","_debounce3","_throttle2","_throttle3","_last2","_last3","_scan2","_scan3","_delay2","_delay3","_awaiting2","_awaiting3","_toProperty2","_toProperty3","_flatMap2","_flatMap3","_combine2","_combine3","_merge2","_merge3","_buffer2","_buffer3","_skip2","_skip3","_skipDuplicates2","_skipDuplicates3","_skipWhile2","_skipWhile3","_flatten2","_flatten3","_fromEvents","_fromEvents2","_fromPromise","_fromPromise2","fromEvents","fromPromise","seq","interval","delay","merge","combine","zip","constant","never","prototype","map","mapError","ob","filter","take","n","takeWhile","assign","el","method","onValue","val","skip","skipWhile","skipDuplicates","debounce","wait","immediate","throttle","leading","trailing","flatten","time","toProperty","flatMap","flatMapFirst","obsLimit","flatMapLatest","drop","DROP_OLD","combinator","buffer","scan","seed","last","awaiting","and","b","not","pluck","args","arguments","getVal","v","len","length","e","createStreamConstructor","name","mixin","NewStream","source","options","_this","_source","_name","_$handleAny","_handleAny","init","Object","create","commonMixin","_clear","_free","createPropertyConstructor","NewProperty","_this2","_Property2","createTimeBaseStreamConstructor","TimeBaseStream","_this3","_wait","_intervalId","_$onTick","_onTick","_onActivation","setInterval","_onDeactivation","clearInterval","defineProperty","value","undefined","_Property","_events","type","VALUE","_handleValue","ERROR","_handleError","ANY","END","_handleEnd","x","emitValue","emitEnd","emitError","onAny","offAny","extend","target","prop","Stream","_fn","_emitter2","getType","unsubscribe","_unsubscribe","_callUnSub","M_NULL","remove","arr","index","originLen","result","Array","j","concat","find","findBy","pred","contains","forEach","mapArr","fill","Observable","_dispatcher","Dispatcher","state","alive","active","setState","emit","dispatch","_on","offValue","_off","onEnd","offEnd","onError","offError","add","_setActive","callSubcribers","count","_activating","cleanup","_ofSameType","A","B","_stream","_stream2","neverStream","emitter","obs","event","end","error","emitEvent","Property","_currentEvent","_cbs","_inLoop","_removedCbs","_list","push","cbs","cb","Date","now","getTime","ConnectCommon","NO_LIMIT","_ref","_ref$obsLimit","_obs","_obsLimit","_drop","_endHandlers","_addAll","_add","transformer","_addToObs","_removeFromObs","_subscribe","_this4","_subEndOf","_unsubEndOf","_this5","endHandler","handler","ed","item","_isEnd","_onEnd","MapStream","MapProperty","equal","S","P","_common2","_pv","_getInitialValue","FlatMap","_sourceEnded","_$handlerSource","_handleSource","_never","eventType","Constant","_now","_now2","Math","max","_immediate","_lastAttempt","_timeoutId","_laterValue","_endLater","_$later","_later","setTimeout","_time","$handler","_buff","_shiftBuff","shift","FilterStream","FilterProperty","_isArray","_isArray2","_lastValue","_seed","_n","SkipWhileStream","SkipWhileProperty","_preventEmit","fromSubUnsub","sub","unsub","eventName","pairs","Error","then","err","TakeWhileStream","TakeWhileProperty","_leading","_trailing","_trailingValue","_lastCallTime","_$trailingCall","_trailingCall","curTime","remaining","_cancelTrailing","clearTimeout","DelayStream","_val","IntervalStream","SeqStream","_d","Function","bind","oThis","TypeError","aArgs","slice","fToBind","fNOP","fBound","apply","isArray","arg","toString","isFunction","functionToCheck","toArray","list","array","Merge","_never2","MapErrorStream","MapErrorProperty","f","t","_merge","_map","_mapError","_skipDuplicates","_toProperty","mainOb","secondaryOb","_connectTwoSource","mixins","_flush","_mainOb","_$handleMainAny","_secondaryOb","_$handleSecondaryAny","_handleMainValue","_handleMainEnd","_handleSecondaryValue","_handleSecondaryError","createProperty","createStream","Combine","passive","_obsCount","_sources","_combinator","_lastestValues","_aliveCount","_$handlers","sourceLen","sourceIndex","_isBelongToObs","_emitValueIfReady","ready","createConstructor","BaseClass","userMixins","ConnectTwoSource","_handleMainAny","_handleSecondaryAny","_handleMainError","_lastSecondary","_handleSecondaryEnd","_$handlerSecondaryAny","_removeSecondaryOb","Zip","_buffers","_spread2","_spread","isReady","_emit","values"],"mappings":"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","file":"qs.pro.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn \n\n\n/** WEBPACK FOOTER **\n ** webpack/universalModuleDefinition\n **/","(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(this, function() {\nreturn /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"/build/\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\t__webpack_require__(35);\n\t\n\tvar _isFunction = __webpack_require__(37);\n\t\n\tvar _isFunction2 = _interopRequireDefault(_isFunction);\n\t\n\tvar _toArray = __webpack_require__(38);\n\t\n\tvar _toArray2 = _interopRequireDefault(_toArray);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _obserable = __webpack_require__(7);\n\t\n\tvar _obserable2 = _interopRequireDefault(_obserable);\n\t\n\tvar _emitter = __webpack_require__(9);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _map2 = __webpack_require__(14);\n\t\n\tvar _map3 = _interopRequireDefault(_map2);\n\t\n\tvar _mapError2 = __webpack_require__(41);\n\t\n\tvar _mapError3 = _interopRequireDefault(_mapError2);\n\t\n\tvar _filter2 = __webpack_require__(21);\n\t\n\tvar _filter3 = _interopRequireDefault(_filter2);\n\t\n\tvar _take2 = __webpack_require__(29);\n\t\n\tvar _take3 = _interopRequireDefault(_take2);\n\t\n\tvar _takeWhile2 = __webpack_require__(30);\n\t\n\tvar _takeWhile3 = _interopRequireDefault(_takeWhile2);\n\t\n\tvar _debounce2 = __webpack_require__(19);\n\t\n\tvar _debounce3 = _interopRequireDefault(_debounce2);\n\t\n\tvar _throttle2 = __webpack_require__(31);\n\t\n\tvar _throttle3 = _interopRequireDefault(_throttle2);\n\t\n\tvar _last2 = __webpack_require__(23);\n\t\n\tvar _last3 = _interopRequireDefault(_last2);\n\t\n\tvar _scan2 = __webpack_require__(24);\n\t\n\tvar _scan3 = _interopRequireDefault(_scan2);\n\t\n\tvar _delay2 = __webpack_require__(20);\n\t\n\tvar _delay3 = _interopRequireDefault(_delay2);\n\t\n\tvar _awaiting2 = __webpack_require__(42);\n\t\n\tvar _awaiting3 = _interopRequireDefault(_awaiting2);\n\t\n\tvar _toProperty2 = __webpack_require__(16);\n\t\n\tvar _toProperty3 = _interopRequireDefault(_toProperty2);\n\t\n\tvar _flatMap2 = __webpack_require__(17);\n\t\n\tvar _flatMap3 = _interopRequireDefault(_flatMap2);\n\t\n\tvar _combine2 = __webpack_require__(44);\n\t\n\tvar _combine3 = _interopRequireDefault(_combine2);\n\t\n\tvar _merge2 = __webpack_require__(40);\n\t\n\tvar _merge3 = _interopRequireDefault(_merge2);\n\t\n\tvar _buffer2 = __webpack_require__(43);\n\t\n\tvar _buffer3 = _interopRequireDefault(_buffer2);\n\t\n\tvar _skip2 = __webpack_require__(25);\n\t\n\tvar _skip3 = _interopRequireDefault(_skip2);\n\t\n\tvar _skipDuplicates2 = __webpack_require__(15);\n\t\n\tvar _skipDuplicates3 = _interopRequireDefault(_skipDuplicates2);\n\t\n\tvar _skipWhile2 = __webpack_require__(26);\n\t\n\tvar _skipWhile3 = _interopRequireDefault(_skipWhile2);\n\t\n\tvar _flatten2 = __webpack_require__(22);\n\t\n\tvar _flatten3 = _interopRequireDefault(_flatten2);\n\t\n\tvar _fromEvents = __webpack_require__(27);\n\t\n\tvar _fromEvents2 = _interopRequireDefault(_fromEvents);\n\t\n\tvar _fromPromise = __webpack_require__(28);\n\t\n\tvar _fromPromise2 = _interopRequireDefault(_fromPromise);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar methodMap = {\n\t    'text': 'innerText',\n\t    'html': 'innerHTML'\n\t};\n\t\n\t/**\n\t * qs 的默认调用会产生一个stream出来,\n\t */\n\tfunction qs(fn) {\n\t    return new _Stream2.default(fn);\n\t}\n\t\n\t/**\n\t * QS的静态方法\n\t *\n\t * 其中有\n\t *\n\t * \t- 时间函数如seq, interval,delay等\n\t * \t- 流的合并函数 merge, combine, zip\n\t */\n\t\n\tqs.fromEvents = _fromEvents2.default;\n\tqs.fromPromise = _fromPromise2.default;\n\t\n\t//时间函数\n\tqs.seq = __webpack_require__(34);\n\tqs.interval = __webpack_require__(33);\n\tqs.delay = __webpack_require__(32);\n\t\n\t//流合并函数\n\tqs.merge = _merge3.default;\n\tqs.combine = _combine3.default;\n\tqs.zip = __webpack_require__(46);\n\t\n\t//常量函数\n\tqs.constant = __webpack_require__(18);\n\tqs.never = __webpack_require__(8);\n\t\n\t/**\n\t * Prototype方法\n\t */\n\t(0, _extend2.default)(_obserable2.default.prototype, {\n\t    map: function map(fn) {\n\t        return (0, _map3.default)(this, fn);\n\t    },\n\t    mapError: function mapError(fn) {\n\t        return (0, _mapError3.default)(ob, fn);\n\t    },\n\t    filter: function filter(fn) {\n\t        return (0, _filter3.default)(this, fn);\n\t    },\n\t    take: function take(n) {\n\t        return (0, _take3.default)(this, n);\n\t    },\n\t    takeWhile: function takeWhile(fn) {\n\t        return (0, _takeWhile3.default)(this, fn);\n\t    },\n\t    assign: function assign(el, method) {\n\t        return this.onValue(function (val) {\n\t            el[method] = val;\n\t        });\n\t    },\n\t    skip: function skip(n) {\n\t        return (0, _skip3.default)(this, n);\n\t    },\n\t    skipWhile: function skipWhile(fn) {\n\t        return (0, _skipWhile3.default)(this, fn);\n\t    },\n\t    skipDuplicates: function skipDuplicates(fn) {\n\t        return (0, _skipDuplicates3.default)(this, fn);\n\t    },\n\t    debounce: function debounce(wait, immediate) {\n\t        return (0, _debounce3.default)(this, wait, immediate);\n\t    },\n\t    throttle: function throttle(wait, leading, trailing) {\n\t        return (0, _throttle3.default)(this, wait, leading, trailing);\n\t    },\n\t    flatten: function flatten(fn) {\n\t        return (0, _flatten3.default)(this, fn);\n\t    },\n\t    delay: function delay(time) {\n\t        return (0, _delay3.default)(this, time);\n\t    },\n\t    toProperty: function toProperty(fn) {\n\t        return (0, _toProperty3.default)(this, fn);\n\t    },\n\t    flatMap: function flatMap(fn) {\n\t        return (0, _flatMap3.default)(this, fn);\n\t    },\n\t    flatMapFirst: function flatMapFirst(fn) {\n\t        return (0, _flatMap3.default)(this, fn, { obsLimit: 1 });\n\t    },\n\t    flatMapLatest: function flatMapLatest(fn) {\n\t        return (0, _flatMap3.default)(this, fn, { obsLimit: 1, drop: _common.DROP_OLD });\n\t    },\n\t    combine: function combine(ob, combinator) {\n\t        return (0, _combine3.default)([this, ob], combinator);\n\t    },\n\t    merge: function merge(ob) {\n\t        return (0, _merge3.default)([this, ob]);\n\t    },\n\t    buffer: function buffer(ob) {\n\t        return (0, _buffer3.default)(this, ob);\n\t    },\n\t    scan: function scan(fn, seed) {\n\t        return (0, _scan3.default)(this, fn, seed);\n\t    },\n\t    last: function last() {\n\t        return (0, _last3.default)(this);\n\t    },\n\t    awaiting: function awaiting(ob) {\n\t        return (0, _awaiting3.default)(this, ob);\n\t    },\n\t    and: function and(ob) {\n\t        return (0, _combine3.default)([this, ob], function (a, b) {\n\t            return a && b;\n\t        });\n\t    },\n\t    not: function not() {\n\t        return this.map(function (val) {\n\t            return !val;\n\t        });\n\t    },\n\t    pluck: function pluck() {\n\t        var args = (0, _toArray2.default)(arguments);\n\t        var getVal = function getVal(v) {\n\t            for (var i = 0, len = args.length; i < len; i++) {\n\t                v = v[args[i]];\n\t            }\n\t            return v;\n\t        };\n\t        return this.map(function (e) {\n\t            return getVal(e);\n\t        });\n\t    }\n\t});\n\t\n\tmodule.exports = qs;\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.createPropertyConstructor = exports.createTimeBaseStreamConstructor = exports.createStreamConstructor = undefined;\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _Property = __webpack_require__(10);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar commonMixin = {\n\t    init: function init() {},\n\t    _free: function _free() {},\n\t    _handleAny: function _handleAny(e) {\n\t        switch (e.type) {\n\t            case _events.VALUE:\n\t                return this._handleValue(e.value);\n\t            case _events.ERROR:\n\t                return this._handleError(e.value);\n\t            case _events.ANY:\n\t                return this._handleValue(e);\n\t            case _events.END:\n\t                return this._handleEnd();\n\t        }\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        this.emitValue(x);\n\t    },\n\t    _handleEnd: function _handleEnd() {\n\t        this.emitEnd();\n\t    },\n\t    _handleError: function _handleError(e) {\n\t        this.emitError(e);\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        this._source.onAny(this._$handleAny);\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        this._source.offAny(this._$handleAny);\n\t    }\n\t};\n\t\n\tfunction createStreamConstructor(name, mixin) {\n\t    function NewStream(source, options) {\n\t        var _this = this;\n\t\n\t        _Stream2.default.call(this);\n\t        this._source = source;\n\t        this._name = source._name + '.' + name;\n\t        this._$handleAny = function (e) {\n\t            return _this._handleAny(e);\n\t        };\n\t        this.init(options);\n\t    }\n\t\n\t    NewStream.prototype = Object.create(_Stream2.default.prototype);\n\t    (0, _extend2.default)(NewStream.prototype, commonMixin, {\n\t        _clear: function _clear() {\n\t            _Stream2.default.prototype._clear.call(this);\n\t            this._free();\n\t            this._source = null;\n\t            this._$handleAny = null;\n\t        }\n\t    }, mixin);\n\t    return NewStream;\n\t}\n\t\n\tfunction createPropertyConstructor(name, mixin) {\n\t    function NewProperty(source, options) {\n\t        var _this2 = this;\n\t\n\t        _Property2.default.call(this);\n\t        this._source = source;\n\t        this._name = source._name + '.' + name;\n\t        this._$handleAny = function (e) {\n\t            return _this2._handleAny(e);\n\t        };\n\t        this.init(options);\n\t    }\n\t\n\t    NewProperty.prototype = Object.create(_Property2.default.prototype);\n\t    (0, _extend2.default)(NewProperty.prototype, commonMixin, {\n\t        _clear: function _clear() {\n\t            _Property2.default.prototype._clear.call(this);\n\t            this._free();\n\t            this._source = null;\n\t            this._$handleAny = null;\n\t        }\n\t    }, mixin);\n\t    return NewProperty;\n\t}\n\t\n\tfunction createTimeBaseStreamConstructor(name, mixin) {\n\t    function TimeBaseStream(wait, options) {\n\t        var _this3 = this;\n\t\n\t        _Stream2.default.call(this);\n\t        this._wait = wait;\n\t        this._intervalId = null;\n\t        this._name = name + 'Stream';\n\t        this._$onTick = function () {\n\t            return _this3._onTick();\n\t        };\n\t        this.init(options);\n\t    }\n\t\n\t    TimeBaseStream.prototype = Object.create(_Stream2.default.prototype);\n\t    (0, _extend2.default)(TimeBaseStream.prototype, {\n\t        init: function init() {},\n\t        _free: function _free() {},\n\t        _onActivation: function _onActivation() {\n\t            this._intervalId = setInterval(this._$onTick, this._wait);\n\t        },\n\t        _onDeactivation: function _onDeactivation() {\n\t            if (this._intervalId !== null) {\n\t                clearInterval(this._intervalId);\n\t                this._intervalId = null;\n\t            }\n\t        },\n\t        _clear: function _clear() {\n\t            _Stream2.default.prototype._clear.call(this);\n\t            this._free();\n\t            this._$onTick = null;\n\t        }\n\t    }, mixin);\n\t    return TimeBaseStream;\n\t}\n\t\n\texports.createStreamConstructor = createStreamConstructor;\n\texports.createTimeBaseStreamConstructor = createTimeBaseStreamConstructor;\n\texports.createPropertyConstructor = createPropertyConstructor;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tfunction extend(target /* mixins ...*/) {\n\t    var length = arguments.length,\n\t        i = undefined,\n\t        prop = undefined;\n\t    for (i = 1; i < length; i++) {\n\t        for (prop in arguments[i]) {\n\t            target[prop] = arguments[i][prop];\n\t        }\n\t    }\n\t    return target;\n\t}\n\t\n\texports.default = extend;\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar VALUE = 'value';\n\tvar ANY = 'any';\n\tvar END = 'end';\n\tvar ERROR = 'error';\n\texports.VALUE = VALUE;\n\texports.ANY = ANY;\n\texports.END = END;\n\texports.ERROR = ERROR;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _obserable = __webpack_require__(7);\n\t\n\tvar _obserable2 = _interopRequireDefault(_obserable);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _emitter = __webpack_require__(9);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Stream(fn) {\n\t    _obserable2.default.call(this);\n\t    this._fn = fn;\n\t}\n\t\n\tStream.prototype = Object.create(_obserable2.default.prototype);\n\t\n\t(0, _extend2.default)(Stream.prototype, {\n\t    _name: 'stream',\n\t\n\t    getType: function getType() {\n\t        return 'stream';\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        var fn = this._fn;\n\t        var unsubscribe = fn((0, _emitter2.default)(this));\n\t        this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        this._callUnSub();\n\t    },\n\t    _callUnSub: function _callUnSub() {\n\t        if (this._unsubscribe !== null) {\n\t            this._unsubscribe();\n\t            this._unsubscribe = null;\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        _obserable2.default.prototype._clear.call(this);\n\t        this._fn = null;\n\t    }\n\t});\n\t\n\texports.default = Stream;\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar M_NULL = '{<_+null+_>}';\n\tvar DROP_OLD = 'drop_old';\n\texports.M_NULL = M_NULL;\n\texports.DROP_OLD = DROP_OLD;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tfunction remove(arr, index) {\n\t    var originLen = arr.length,\n\t        result = undefined;\n\t    if (index >= 0 && index < originLen) {\n\t        if (originLen === 1) {\n\t            result = [];\n\t        } else {\n\t            result = new Array(originLen - 1);\n\t            for (var i = 0, j = 0; i < originLen; i++) {\n\t                if (i !== index) {\n\t                    result[j] = arr[i];\n\t                    j++;\n\t                }\n\t            }\n\t        }\n\t    } else {\n\t        result = arr;\n\t    }\n\t    return result;\n\t}\n\t\n\tfunction concat(a, b) {\n\t    return a.concat(b);\n\t}\n\t\n\tfunction find(arr, v) {\n\t    for (var i = 0, len = arr.length; i < len; i++) {\n\t        if (arr[i] === v) {\n\t            return i;\n\t        }\n\t    }\n\t    return -1;\n\t}\n\t\n\tfunction findBy(arr, pred) {\n\t    for (var i = 0, len = arr.length; i < len; i++) {\n\t        if (pred(arr[i])) {\n\t            return i;\n\t        }\n\t    }\n\t    return -1;\n\t}\n\t\n\tfunction contains(arr, val) {\n\t    return find(arr, val) !== -1;\n\t}\n\t\n\tfunction forEach(arr, fn) {\n\t    for (var i = 0, len = arr.length; i < len; i++) {\n\t        fn(arr[i], i);\n\t    }\n\t}\n\t\n\tfunction map(arr, fn) {\n\t    var len = arr.length;\n\t    var mapArr = new Array(len);\n\t    for (var i = 0; i < len; i++) {\n\t        mapArr[i] = fn(arr[i], i);\n\t    }\n\t    return mapArr;\n\t}\n\t\n\tfunction fill(arr, val) {\n\t    var len = arr.length,\n\t        i;\n\t    for (i = 0; i < len; i++) {\n\t        arr[i] = val;\n\t    }\n\t}\n\t\n\texports.remove = remove;\n\texports.concat = concat;\n\texports.find = find;\n\texports.findBy = findBy;\n\texports.contains = contains;\n\texports.forEach = forEach;\n\texports.fill = fill;\n\texports.map = map;\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _dispatcher = __webpack_require__(11);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Observable() {\n\t    this._dispatcher = new _dispatcher.Dispatcher();\n\t    this.state = {\n\t        alive: true,\n\t        active: false\n\t    };\n\t}\n\t\n\t(0, _extend2.default)(Observable.prototype, {\n\t    _name: 'obserable',\n\t\n\t    setState: function setState(name, value) {\n\t        this.state[name] = value;\n\t    },\n\t    _onActivation: function _onActivation() {},\n\t    _onDeactivation: function _onDeactivation() {},\n\t    emit: function emit(type, v) {\n\t        switch (type) {\n\t            case _events.VALUE:\n\t                return this.emitValue(v);\n\t            case _events.ERROR:\n\t                return this.emitError(x);\n\t            case _events.END:\n\t                return this.emitEnd();\n\t        }\n\t    },\n\t    emitValue: function emitValue(value) {\n\t        if (this.state.alive) {\n\t            this._dispatcher.dispatch({ type: _events.VALUE, value: value }, this);\n\t        }\n\t    },\n\t    emitEnd: function emitEnd() {\n\t        if (this.state.alive) {\n\t            this.setState('alive', false);\n\t            this._dispatcher.dispatch({ type: _events.END }, this);\n\t            this._clear();\n\t        }\n\t    },\n\t    emitError: function emitError(value) {\n\t        if (this.state.alive) {\n\t            this._dispatcher.dispatch({ type: _events.ERROR, value: value });\n\t        }\n\t    },\n\t    onValue: function onValue(fn) {\n\t        return this._on(_events.VALUE, fn);\n\t    },\n\t    offValue: function offValue(fn) {\n\t        return this._off(_events.VALUE, fn);\n\t    },\n\t    onEnd: function onEnd(fn) {\n\t        return this._on(_events.END, fn);\n\t    },\n\t    offEnd: function offEnd(fn) {\n\t        return this._off(_events.END, fn);\n\t    },\n\t    onAny: function onAny(fn) {\n\t        return this._on(_events.ANY, fn);\n\t    },\n\t    offAny: function offAny(fn) {\n\t        return this._off(_events.ANY, fn);\n\t    },\n\t    onError: function onError(fn) {\n\t        return this._on(_events.ERROR, fn);\n\t    },\n\t    offError: function offError(fn) {\n\t        return this._off(_events.ERROR, fn);\n\t    },\n\t    _on: function _on(type, fn) {\n\t        if (this.state.alive) {\n\t            this._dispatcher.add(type, fn);\n\t            this._setActive(true);\n\t        } else {\n\t            (0, _dispatcher.callSubcribers)(type, fn, { type: _events.END });\n\t        }\n\t        return this;\n\t    },\n\t    _off: function _off(type, fn) {\n\t        if (this.state.alive) {\n\t            var count = this._dispatcher.remove(type, fn);\n\t            if (count === 0) {\n\t                this._setActive(false);\n\t            }\n\t        }\n\t        return this;\n\t    },\n\t    _setActive: function _setActive(active) {\n\t        if (this.state.active !== active) {\n\t            this.setState('active', active);\n\t            if (active) {\n\t                //激活\n\t                this._activating = true;\n\t                this._onActivation();\n\t                this._activating = false;\n\t            } else {\n\t                this._onDeactivation();\n\t            }\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        this._setActive(false);\n\t        this._dispatcher.cleanup();\n\t        this._dispatcher = null;\n\t    },\n\t    _ofSameType: function _ofSameType(A, B) {\n\t        return A.prototype.getType() === this.getType() ? A : B;\n\t    }\n\t});\n\t\n\texports.default = Observable;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _stream = __webpack_require__(39);\n\t\n\tvar _stream2 = _interopRequireDefault(_stream);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar neverStream = new _stream2.default();\n\tneverStream.emitEnd();\n\tneverStream._name = 'never';\n\t\n\tmodule.exports = function never() {\n\t  return neverStream;\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tfunction emitter(obs) {\n\t\n\t    function value(x) {\n\t        obs.emitValue(x);\n\t        return obs.state.active;\n\t    }\n\t\n\t    function event(e) {\n\t        obs.emit(e.type, e.value);\n\t        return obs.state.active;\n\t    }\n\t\n\t    function end() {\n\t        obs.emitEnd();\n\t        return obs.state.active;\n\t    }\n\t\n\t    function error(e) {\n\t        obs.emitError(e);\n\t        return obs.state.active;\n\t    }\n\t\n\t    return {\n\t        value: value,\n\t        event: event,\n\t        error: error,\n\t        emit: value,\n\t        emitEvent: event,\n\t        end: end\n\t    };\n\t}\n\t\n\texports.default = emitter;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _obserable = __webpack_require__(7);\n\t\n\tvar _obserable2 = _interopRequireDefault(_obserable);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _dispatcher = __webpack_require__(11);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Property() {\n\t    _obserable2.default.call(this);\n\t    this._currentEvent = null;\n\t}\n\t\n\tProperty.prototype = Object.create(_obserable2.default.prototype);\n\t\n\t(0, _extend2.default)(Property.prototype, {\n\t    _name: 'property',\n\t\n\t    getType: function getType() {\n\t        return 'property';\n\t    },\n\t    emitValue: function emitValue(value) {\n\t        if (this.state.alive) {\n\t            this._currentEvent = { type: _events.VALUE, value: value };\n\t            if (!this._activating) {\n\t                this._dispatcher.dispatch({ type: _events.VALUE, value: value });\n\t            }\n\t        }\n\t    },\n\t    emitEnd: function emitEnd() {\n\t        if (this.state.alive) {\n\t            this.setState('alive', false);\n\t            if (!this._activating) {\n\t                this._dispatcher.dispatch({ type: _events.END });\n\t            }\n\t            this._clear();\n\t        }\n\t    },\n\t    emitError: function emitError(value) {\n\t        if (this.state.alive) {\n\t            this._currentEvent = { type: _events.ERROR, value: value };\n\t            if (!this._activating) {\n\t                this._dispatcher.dispatch({ type: _events.ERROR, value: value });\n\t            }\n\t        }\n\t    },\n\t    _on: function _on(type, fn) {\n\t        if (this.state.alive) {\n\t            this._dispatcher.add(type, fn);\n\t            this._setActive(true);\n\t        }\n\t        if (this._currentEvent !== null) {\n\t            (0, _dispatcher.callSubcribers)(type, fn, this._currentEvent);\n\t        }\n\t        if (!this.state.alive) {\n\t            (0, _dispatcher.callSubcribers)(type, fn, { type: _events.END });\n\t        }\n\t        return this;\n\t    }\n\t});\n\t\n\texports.default = Property;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.callSubcribers = exports.Dispatcher = undefined;\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Dispatcher() {\n\t    this._cbs = [];\n\t    this._inLoop = 0;\n\t    this._removedCbs = [];\n\t}\n\t\n\tfunction callSubcribers(type, fn, event) {\n\t    if (type === _events.ANY) {\n\t        fn(event);\n\t    } else if (type === event.type) {\n\t        if (type === _events.VALUE || type === _events.ERROR) {\n\t            fn(event.value);\n\t        } else if (type === _events.END) {\n\t            fn();\n\t        }\n\t    }\n\t}\n\t\n\t(0, _extend2.default)(Dispatcher.prototype, {\n\t    add: function add(type, fn) {\n\t        this._cbs.push({ type: type, fn: fn });\n\t    },\n\t    remove: function remove(type, fn) {\n\t        var cbs = this._cbs;\n\t        var index = null;\n\t        for (var i = 0, len = cbs.length; i < len; i++) {\n\t            var cb = cbs[i];\n\t            if (type === cb.type && cb.fn === fn) {\n\t                index = i;\n\t            }\n\t        }\n\t        //如果在通知的循环中，则将移除的cb添加到_removeCbs中\n\t        if (this._inLoop !== 0 && index !== null) {\n\t            this._removedCbs.push(this._cbs[index]);\n\t        }\n\t        this._cbs = (0, _list.remove)(this._cbs, index);\n\t\n\t        return this._cbs.length;\n\t    },\n\t    dispatch: function dispatch(event, source) {\n\t        this._inLoop++;\n\t        for (var i = 0, cbs = this._cbs; i < cbs.length; i++) {\n\t            var cb = cbs[i];\n\t            if (this._cbs === null) {\n\t                break;\n\t            } //if cleanup\n\t            if ((0, _list.contains)(this._removedCbs, cb)) {\n\t                continue;\n\t            } //移除的话，不需要继续执行\n\t            callSubcribers(cb.type, cb.fn, event);\n\t        }\n\t        this._inLoop--;\n\t        if (this._inLoop === 0) {\n\t            this._removedCbs = [];\n\t        }\n\t    },\n\t    cleanup: function cleanup() {\n\t        this._cbs = null;\n\t        this._removedCbs = null;\n\t    }\n\t});\n\t\n\texports.Dispatcher = Dispatcher;\n\texports.callSubcribers = callSubcribers;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.default = Date.now ? function () {\n\t  return Date.now();\n\t} : function () {\n\t  return new Date().getTime();\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar NO_LIMIT = -1;\n\t\n\tvar id = function id(x) {\n\t    return x;\n\t};\n\tfunction ConnectCommon(options) {\n\t    _Stream2.default.call(this);\n\t    this.init(options);\n\t}\n\t\n\tConnectCommon.prototype = Object.create(_Stream2.default.prototype);\n\t\n\t(0, _extend2.default)(ConnectCommon.prototype, {\n\t    init: function init() {\n\t        var _this = this;\n\t\n\t        var _ref = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\t\n\t        var _ref$obsLimit = _ref.obsLimit;\n\t        var obsLimit = _ref$obsLimit === undefined ? NO_LIMIT : _ref$obsLimit;\n\t        var drop = _ref.drop;\n\t\n\t        this._obs = [];\n\t        this._obsLimit = obsLimit;\n\t        this._drop = drop;\n\t        this._endHandlers = [];\n\t        this._$handleAny = function (e) {\n\t            return _this._handleAny(e);\n\t        };\n\t    },\n\t    _handleAny: function _handleAny(e) {\n\t        switch (e.type) {\n\t            case _events.VALUE:\n\t                return this.emitValue(e.value);\n\t            case _events.ERROR:\n\t                return this.emitError(e.value);\n\t        }\n\t    },\n\t    _addAll: function _addAll(obs) {\n\t        var _this2 = this;\n\t\n\t        (0, _list.forEach)(obs, function (ob) {\n\t            return _this2._add(ob);\n\t        });\n\t    },\n\t    _add: function _add(ob) {\n\t        var transformer = arguments.length <= 1 || arguments[1] === undefined ? id : arguments[1];\n\t\n\t        var obsLimit = this._obsLimit;\n\t        if (obsLimit === NO_LIMIT || this._obs.length < obsLimit) {\n\t            //如果没有限制， 或者没有超出监听队列的限制, 则继续添加监听\n\t            this._addToObs(transformer(ob));\n\t        } else {\n\t            //如果超出，且允许移除最旧的spawn的流，则移除之后，然后spawn出新的流\n\t            //不允许移除的话，则什么都不做, 这种情况就类似与，直到上一个流结束，才能够添加新的流，可以实现flatMapFirst()的效果\n\t            if (this._drop === _common.DROP_OLD) {\n\t                this._removeFromObs(this._obs[0]);\n\t                //继续调用添加接口，直到可以加入为止。\n\t                this._add(ob, transformer);\n\t            }\n\t        }\n\t    },\n\t    _addToObs: function _addToObs(ob) {\n\t        if (this.state.active) {\n\t            var e = ob._currentEvent;\n\t            if (!ob.state.alive) {\n\t                if (ob._currentEvent) {\n\t                    this.emit(e.type, e.value);\n\t                }\n\t                return;\n\t            }\n\t            this._obs = (0, _list.concat)(this._obs, [ob]);\n\t            this._subscribe(ob);\n\t        } else {\n\t            this._obs = (0, _list.concat)(this._obs, [ob]);\n\t        }\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        var _this3 = this;\n\t\n\t        (0, _list.forEach)(this._obs, function (ob) {\n\t            return _this3._subscribe(ob);\n\t        });\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        var _this4 = this;\n\t\n\t        (0, _list.forEach)(this._obs, function (ob) {\n\t            return _this4._unsubscribe(ob);\n\t        });\n\t    },\n\t    _subscribe: function _subscribe(ob) {\n\t        ob.onAny(this._$handleAny);\n\t        //在上面这个步骤状态可能会变为inactive, 这样子，就没有必要监听End事件\n\t        if (this.state.active) {\n\t            this._subEndOf(ob);\n\t        }\n\t    },\n\t    _unsubscribe: function _unsubscribe(ob) {\n\t        ob.offAny(this._$handleAny);\n\t        this._unsubEndOf(ob);\n\t    },\n\t    _subEndOf: function _subEndOf(ob) {\n\t        var _this5 = this;\n\t\n\t        var endHandler = function endHandler() {\n\t            return _this5._removeFromObs(ob);\n\t        };\n\t        this._endHandlers.push({ ob: ob, handler: endHandler });\n\t        ob.onEnd(endHandler);\n\t    },\n\t    _unsubEndOf: function _unsubEndOf(ob) {\n\t        var index = (0, _list.findBy)(this._endHandlers, function (ed) {\n\t            return ed.ob === ob;\n\t        });\n\t        if (index !== -1) {\n\t            ob.offEnd(this._endHandlers[index].handler);\n\t            this._endHandlers = (0, _list.remove)(this._endHandlers, index);\n\t        }\n\t    },\n\t    _removeFromObs: function _removeFromObs(ob) {\n\t        //active状态下才需要unsub,如果是inative的时候，由于没有sub过，也就无需unsub了\n\t        if (this.state.active) {\n\t            this._unsubscribe(ob);\n\t        }\n\t        var index = (0, _list.findBy)(this._obs, function (item) {\n\t            return item === ob;\n\t        });\n\t        this._obs = (0, _list.remove)(this._obs, index);\n\t        if (index !== -1) {\n\t            //如果监听的所有observer都已经结束了，那么merge流也可以结束了.\n\t            if (this._isEnd()) {\n\t                this._onEnd();\n\t            }\n\t        }\n\t        return index;\n\t    },\n\t    _isEnd: function _isEnd() {\n\t        return this._obs.length === 0;\n\t    },\n\t    _clear: function _clear() {\n\t        _Stream2.default.prototype._clear.call(this);\n\t        this._obs = null;\n\t        this._$handleAny = null;\n\t        this._endHandlers = null;\n\t    }\n\t});\n\t\n\texports.default = ConnectCommon;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        if (typeof fn !== 'function') {\n\t            //处理 .map(1) 的情形， 这种调用方式表示  fn = () => 1\n\t            this._fn = function () {\n\t                return fn;\n\t            };\n\t        } else {\n\t            this._fn = fn;\n\t        }\n\t    },\n\t    _free: function _free() {\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        this.emitValue(this._fn(x));\n\t    }\n\t};\n\t\n\tvar MapStream = (0, _common.createStreamConstructor)('map', mixin);\n\tvar MapProperty = (0, _common.createPropertyConstructor)('map', mixin);\n\t\n\tfunction map(source, fn) {\n\t    return new (source._ofSameType(MapStream, MapProperty))(source, { fn: fn });\n\t}\n\t\n\texports.default = map;\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = skipDuplicates;\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _common2 = __webpack_require__(5);\n\t\n\tvar equal = function equal(a, b) {\n\t    return a === b;\n\t};\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._pv = _common2.M_NULL;\n\t        this._fn = fn;\n\t    },\n\t    _free: function _free() {\n\t        this._pv = null;\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._pv === _common2.M_NULL || !this._fn(this._pv, x)) {\n\t            this._pv = x;\n\t            this.emitValue(x);\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('skipDuplicates', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('skipDuplicates', mixin);\n\t\n\tfunction skipDuplicates(source) {\n\t    var fn = arguments.length <= 1 || arguments[1] === undefined ? equal : arguments[1];\n\t\n\t    return new (source._ofSameType(S, P))(source, { fn: fn });\n\t}\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _common2 = __webpack_require__(5);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._getInitialValue = fn;\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        if (this._getInitialValue !== null) {\n\t            this.emitValue(this._getInitialValue());\n\t        }\n\t        this._source.onAny(this._$handleAny);\n\t    }\n\t};\n\t\n\tvar P = (0, _common.createPropertyConstructor)('toProperty', mixin);\n\t\n\tmodule.exports = function toProperty(ob) {\n\t    var fn = arguments.length <= 1 || arguments[1] === undefined ? null : arguments[1];\n\t\n\t    return new P(ob, { fn: fn });\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _never = __webpack_require__(8);\n\t\n\tvar _never2 = _interopRequireDefault(_never);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar _common = __webpack_require__(13);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction FlatMap(source, fn, options) {\n\t    var _this = this;\n\t\n\t    _common2.default.call(this, options);\n\t    this._source = source;\n\t    this._fn = fn;\n\t    this._sourceEnded = false;\n\t    this._$handlerSource = function (e) {\n\t        return _this._handleSource(e);\n\t    };\n\t}\n\t\n\tFlatMap.prototype = Object.create(_common2.default.prototype);\n\t\n\t(0, _extend2.default)(FlatMap.prototype, {\n\t    _name: 'flatMap',\n\t\n\t    _onActivation: function _onActivation() {\n\t        _common2.default.prototype._onActivation.call(this);\n\t        if (this.state.active) {\n\t            //active状态下监听souce的所有事件\n\t            this._source.onAny(this._$handlerSource);\n\t        }\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        _common2.default.prototype._onDeactivation.call(this);\n\t        this._source.offAny(this._$handlerSource);\n\t    },\n\t    _handleSource: function _handleSource(e) {\n\t        var eventType = e.type;\n\t        if (eventType === _events.VALUE) {\n\t            //使用source的value来spawn新的流，this._fn会返回新的流\n\t            this._add(e.value, this._fn);\n\t        } else if (eventType === _events.ERROR) {\n\t            this.emitError(e.value);\n\t        } else if (eventType === _events.END) {\n\t            //源头结束，而spawn出来的流都已经结束，可以直接发出结束\n\t            if (this._isEnd()) {\n\t                this.emitEnd();\n\t            }\n\t            this._sourceEnded = true;\n\t        }\n\t    },\n\t    _onEnd: function _onEnd() {\n\t        //如果源头还没有结束，先hold着，后面还有新的value进来要spawn\n\t        if (this._sourceEnded) {\n\t            //如果源头已经结束，就可以emitEnd了\n\t            this.emitEnd();\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        this._source = null;\n\t        this._fn = null;\n\t        this._$handlerSource = null;\n\t    }\n\t});\n\t\n\tmodule.exports = function flatMap(obs, fn, options) {\n\t    return new FlatMap(obs, fn, options);\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Property = __webpack_require__(10);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Constant(value) {\n\t    this._currentEvent = { type: _events.VALUE, value: value };\n\t}\n\t\n\tConstant.prototype = Object.create(_Property2.default.prototype);\n\t\n\t(0, _extend2.default)(Constant.prototype, {\n\t    state: {\n\t        alive: false,\n\t        active: false\n\t    },\n\t    _activating: false\n\t});\n\t\n\tmodule.exports = function constant(value) {\n\t    return new Constant(value);\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = debounce;\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _now = __webpack_require__(12);\n\t\n\tvar _now2 = _interopRequireDefault(_now);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var _this = this;\n\t\n\t        var wait = _ref.wait;\n\t        var immediate = _ref.immediate;\n\t\n\t        this._wait = Math.max(0, wait);\n\t        this._immediate = immediate;\n\t        this._lastAttempt = 0;\n\t        this._timeoutId = null;\n\t        this._laterValue = null;\n\t        this._endLater = false;\n\t        this._$later = function () {\n\t            return _this._later();\n\t        };\n\t    },\n\t    _free: function _free() {\n\t        this._laterValue = null;\n\t        this._$later = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._activating) {\n\t            this.emitValue(x);\n\t        } else {\n\t            this._lastAttempt = (0, _now2.default)();\n\t            if (this._immediate && !this._timeoutId) {\n\t                this.emitValue(x);\n\t            }\n\t            if (!this._timeoutId) {\n\t                this._timeoutId = setTimeout(this._$later, this._wait);\n\t            }\n\t            if (!this._immediate) {\n\t                this._laterValue = x;\n\t            }\n\t        }\n\t    },\n\t    _handleEnd: function _handleEnd() {\n\t        if (this._activating) {\n\t            this.emitEnd();\n\t        } else {\n\t            if (this._timeoutId && !this._immediate) {\n\t                this._endLater = true;\n\t            } else {\n\t                this.emitEnd();\n\t            }\n\t        }\n\t    },\n\t    _later: function _later() {\n\t        var last = (0, _now2.default)() - this._lastAttempt;\n\t        if (last < this._wait && last >= 0) {\n\t            this._timeoutId = setTimeout(this._$later, this._wait - last);\n\t        } else {\n\t            this._timeoutId = null;\n\t            if (!this._immediate) {\n\t                this.emitValue(this._laterValue);\n\t                this._laterValue = null;\n\t            }\n\t            if (this._endLater) {\n\t                this.emitEnd();\n\t            }\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('debounce', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('debounce', mixin);\n\t\n\tfunction debounce(source, wait, immediate) {\n\t    return new (source._ofSameType(S, P))(source, { wait: wait, immediate: immediate });\n\t}\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = delay;\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar END = 'buff_end';\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var _this = this;\n\t\n\t        var time = _ref.time;\n\t\n\t        this._time = time;\n\t        this.$handler = function (e) {\n\t            return _this._handleValue(e);\n\t        };\n\t        this._buff = [];\n\t        this._shiftBuff = function () {\n\t            var val = _this._buff.shift();\n\t            if (val === END) {\n\t                _this.emitEnd();\n\t            } else {\n\t                _this.emitValue(val);\n\t            }\n\t        };\n\t    },\n\t    _free: function _free() {\n\t        this._buff = null;\n\t        this._shiftBuff = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        this._buff.push(x);\n\t        setTimeout(this._shiftBuff, this._time);\n\t    },\n\t    _handleEnd: function _handleEnd() {\n\t        this._buff.push(END);\n\t        setTimeout(this._shiftBuff, this._time);\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('delay', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('delay', mixin);\n\t\n\tfunction delay(source, time) {\n\t    return new (source._ofSameType(S, P))(source, { time: time });\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._fn = fn;\n\t    },\n\t    _free: function _free() {\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._fn(x)) {\n\t            this.emitValue(x);\n\t        }\n\t    }\n\t};\n\t\n\tvar FilterStream = (0, _common.createStreamConstructor)('filter', mixin);\n\tvar FilterProperty = (0, _common.createPropertyConstructor)('filter', mixin);\n\t\n\tfunction filter(source, fn) {\n\t    return new (source._ofSameType(FilterStream, FilterProperty))(source, { fn: fn });\n\t}\n\t\n\texports.default = filter;\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _isArray = __webpack_require__(36);\n\t\n\tvar _isArray2 = _interopRequireDefault(_isArray);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._fn = fn;\n\t    },\n\t    _free: function _free() {\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(arr) {\n\t        var _this = this;\n\t\n\t        var x = this._fn(arr);\n\t        if ((0, _isArray2.default)(x)) {\n\t            (0, _list.forEach)(x, function (v) {\n\t                return _this.emitValue(v);\n\t            });\n\t        } else {\n\t            this.emitValue(x);\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('flatten', mixin);\n\t\n\tvar id = function id(x) {\n\t    return x;\n\t};\n\tfunction flatten(source) {\n\t    var fn = arguments.length <= 1 || arguments[1] === undefined ? id : arguments[1];\n\t\n\t    return new S(source, { fn: fn });\n\t}\n\t\n\texports.default = flatten;\n\n/***/ },\n/* 23 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _common2 = __webpack_require__(5);\n\t\n\tvar mixin = {\n\t    init: function init() {\n\t        this._lastValue = _common2.M_NULL;\n\t    },\n\t    _free: function _free() {\n\t        this._lastValue = null;\n\t    },\n\t    _handleValue: function _handleValue(val) {\n\t        this._lastValue = val;\n\t    },\n\t    _handleEnd: function _handleEnd() {\n\t        if (this._lastValue !== _common2.M_NULL) {\n\t            this.emitValue(this._lastValue);\n\t        }\n\t        this.emitEnd();\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('last', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('last', mixin);\n\t\n\tfunction last(source) {\n\t    return new (source._ofSameType(S, P))(source);\n\t}\n\t\n\texports.default = last;\n\n/***/ },\n/* 24 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _common2 = __webpack_require__(5);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t        var seed = _ref.seed;\n\t\n\t        this._fn = fn;\n\t        this._seed = seed;\n\t        if (seed !== _common2.M_NULL) {\n\t            this.emitValue(seed);\n\t        }\n\t    },\n\t    _free: function _free() {\n\t        this._seed = null;\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(val) {\n\t        var fn = this._fn;\n\t        if (this._currentEvent !== null) {\n\t            this.emitValue(fn(this._currentEvent.value, val));\n\t        } else {\n\t            this.emitValue(this._seed === _common2.M_NULL ? val : fn(this._seed, val));\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createPropertyConstructor)('scan', mixin);\n\t\n\tfunction scan(source, fn) {\n\t    var seed = arguments.length <= 2 || arguments[2] === undefined ? _common2.M_NULL : arguments[2];\n\t\n\t    return new S(source, { fn: fn, seed: seed });\n\t}\n\t\n\texports.default = scan;\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var n = _ref.n;\n\t\n\t        this._n = Math.max(0, n); //保证用户输入负数是无效的。\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._n === 0) {\n\t            this.emitValue(x);\n\t        } else {\n\t            this._n--;\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('skip', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('skip', mixin);\n\t\n\tfunction skip(source, n) {\n\t    return new (source._ofSameType(S, P))(source, { n: n });\n\t}\n\t\n\texports.default = skip;\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._fn = fn;\n\t        this._preventEmit = true;\n\t    },\n\t    _free: function _free() {\n\t        this._fn = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._preventEmit === true) {\n\t            this._preventEmit = this._fn(x);\n\t        }\n\t        if (this._preventEmit === false) {\n\t            this.emitValue(x);\n\t        }\n\t    }\n\t};\n\t\n\tvar SkipWhileStream = (0, _common.createStreamConstructor)('skipWhile', mixin);\n\tvar SkipWhileProperty = (0, _common.createPropertyConstructor)('skipWhile', mixin);\n\t\n\tfunction skipWhile(source, fn) {\n\t    return new (source._ofSameType(SkipWhileStream, SkipWhileProperty))(source, { fn: fn });\n\t}\n\t\n\texports.default = skipWhile;\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = fromEvents;\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar pairs = [['addEventListener', 'removeEventListener'], ['addListener', 'removeListener'], ['on', 'off']];\n\t\n\tfunction fromSubUnsub(sub, unsub) {\n\t    return new _Stream2.default(function (emitter) {\n\t        var handler = function handler(x) {\n\t            return emitter.emit(x);\n\t        };\n\t\n\t        sub(handler);\n\t        return function () {\n\t            return unsub(handler);\n\t        };\n\t    });\n\t}\n\t\n\tfunction fromEvents(el, eventName) {\n\t    var sub = undefined,\n\t        unsub = undefined;\n\t    for (var i = 0; i < pairs.length; i++) {\n\t        if (typeof el[pairs[i][0]] === 'function' && typeof el[pairs[i][1]] === 'function') {\n\t            sub = pairs[i][0];\n\t            unsub = pairs[i][1];\n\t            break;\n\t        }\n\t    }\n\t\n\t    if (sub === undefined) {\n\t        throw new Error('el上没有监听事件的方法');\n\t    }\n\t    return fromSubUnsub(function (handler) {\n\t        return el[sub](eventName, handler);\n\t    }, function (handler) {\n\t        return el[unsub](eventName, handler);\n\t    });\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = fromPromise;\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction fromPromise(p) {\n\t    return new _Stream2.default(function (emitter) {\n\t        p.then(function (val) {\n\t            emitter.emit(val);\n\t            emitter.end();\n\t        }, function (err) {\n\t            emitter.error(err);\n\t            emitter.end();\n\t        });\n\t    }).toProperty();\n\t}\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var n = _ref.n;\n\t\n\t        this._n = n;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        this._n--;\n\t        this.emitValue(x);\n\t        if (this._n === 0) {\n\t            this.emitEnd();\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('take', mixin);\n\tvar P = (0, _common.createPropertyConstructor)('take', mixin);\n\t\n\tfunction take(source, n) {\n\t    return new (source._ofSameType(S, P))(source, { n: n });\n\t}\n\t\n\texports.default = take;\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._fn = fn;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._fn(x)) {\n\t            this.emitValue(x);\n\t        } else {\n\t            this.emitEnd();\n\t        }\n\t    }\n\t};\n\t\n\tvar TakeWhileStream = (0, _common.createStreamConstructor)('takeWhile', mixin);\n\tvar TakeWhileProperty = (0, _common.createPropertyConstructor)('takeWhile', mixin);\n\t\n\tfunction takeWhile(source, fn) {\n\t    return new (source._ofSameType(TakeWhileStream, TakeWhileProperty))(source, { fn: fn });\n\t}\n\t\n\texports.default = takeWhile;\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = throttle;\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _now = __webpack_require__(12);\n\t\n\tvar _now2 = _interopRequireDefault(_now);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var _this = this;\n\t\n\t        var wait = _ref.wait;\n\t        var leading = _ref.leading;\n\t        var trailing = _ref.trailing;\n\t\n\t        this._wait = Math.max(0, wait);\n\t        this._leading = leading;\n\t        this._trailing = trailing;\n\t        this._trailingValue = null;\n\t        this._timeoutId = null;\n\t        this._endLater = false;\n\t        this._lastCallTime = 0;\n\t        this._$trailingCall = function () {\n\t            return _this._trailingCall();\n\t        };\n\t    },\n\t    _free: function _free() {\n\t        this._trailingValue = null;\n\t        this._$trailingCall = null;\n\t    },\n\t    _handleValue: function _handleValue(x) {\n\t        if (this._activating) {\n\t            this.emitValue(x);\n\t        } else {\n\t            var curTime = (0, _now2.default)();\n\t            if (this._lastCallTime === 0 && !this._leading) {\n\t                this._lastCallTime = curTime;\n\t            }\n\t            var remaining = this._wait - (curTime - this._lastCallTime);\n\t            if (remaining <= 0) {\n\t                this._cancelTrailing();\n\t                this._lastCallTime = curTime;\n\t                this.emitValue(x);\n\t            } else if (this._trailing) {\n\t                this._cancelTrailing();\n\t                this._trailingValue = x;\n\t                this._timeoutId = setTimeout(this._$trailingCall, remaining);\n\t            }\n\t        }\n\t    },\n\t    _handleEnd: function _handleEnd() {\n\t        if (this._activating) {\n\t            this.emitEnd();\n\t        } else {\n\t            if (this._timeoutId) {\n\t                this._endLater = true;\n\t            } else {\n\t                this.emitEnd();\n\t            }\n\t        }\n\t    },\n\t    _cancelTrailing: function _cancelTrailing() {\n\t        if (this._timeoutId !== null) {\n\t            clearTimeout(this._timeoutId);\n\t            this._timeoutId = null;\n\t        }\n\t    },\n\t    _trailingCall: function _trailingCall() {\n\t        this.emitValue(this._trailingValue);\n\t        this._timeoutId = null;\n\t        this._trailingValue = null;\n\t        this._lastCallTime = !this._leading ? 0 : (0, _now2.default)();\n\t        if (this._endLater) {\n\t            this.emitEnd();\n\t        }\n\t    }\n\t};\n\t\n\tvar S = (0, _common.createStreamConstructor)('throttle', mixin);\n\t\n\tfunction throttle(source, wait) {\n\t    var leading = arguments.length <= 2 || arguments[2] === undefined ? true : arguments[2];\n\t    var trailing = arguments.length <= 3 || arguments[3] === undefined ? true : arguments[3];\n\t\n\t    return new S(source, { wait: wait, leading: leading, trailing: trailing });\n\t}\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar DelayStream = (0, _common.createTimeBaseStreamConstructor)('delay', {\n\t    init: function init(_ref) {\n\t        var val = _ref.val;\n\t\n\t        this._val = val;\n\t    },\n\t    _free: function _free() {\n\t        this._val = null;\n\t    },\n\t    _onTick: function _onTick() {\n\t        this.emitValue(this._val);\n\t        this.emitEnd();\n\t    }\n\t});\n\t\n\tmodule.exports = function delay(wait, val) {\n\t    return new DelayStream(wait, { val: val });\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar IntervalStream = (0, _common.createTimeBaseStreamConstructor)('interval', {\n\t    init: function init(_ref) {\n\t        var val = _ref.val;\n\t\n\t        this._val = val;\n\t    },\n\t    _free: function _free() {\n\t        this._val = null;\n\t    },\n\t    _onTick: function _onTick() {\n\t        this.emitValue(this._val);\n\t    }\n\t});\n\t\n\tmodule.exports = function interval(wait, val) {\n\t    return new IntervalStream(wait, { val: val });\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar SeqStream = (0, _common.createTimeBaseStreamConstructor)('seq', {\n\t    init: function init(_ref) {\n\t        var arr = _ref.arr;\n\t\n\t        this._d = arr;\n\t    },\n\t    _free: function _free() {\n\t        this._d = null;\n\t    },\n\t    _onTick: function _onTick() {\n\t        if (this._d.length === 1) {\n\t            this.emitValue(this._d[0]);\n\t            this.emitEnd();\n\t        } else {\n\t            this.emitValue(this._d.shift());\n\t        }\n\t    }\n\t});\n\t\n\tmodule.exports = function seq(wait, arr) {\n\t    return new SeqStream(wait, { arr: arr });\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tif (!Function.prototype.bind) {\n\t  Function.prototype.bind = function (oThis) {\n\t    if (typeof this !== 'function') {\n\t      // closest thing possible to the ECMAScript 5\n\t      // internal IsCallable function\n\t      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n\t    }\n\t\n\t    var aArgs = Array.prototype.slice.call(arguments, 1),\n\t        fToBind = this,\n\t        fNOP = function fNOP() {},\n\t        fBound = function fBound() {\n\t      return fToBind.apply(this instanceof fNOP ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));\n\t    };\n\t\n\t    if (this.prototype) {\n\t      // native functions don't have a prototype\n\t      fNOP.prototype = this.prototype;\n\t    }\n\t    fBound.prototype = new fNOP();\n\t\n\t    return fBound;\n\t  };\n\t}\n\n/***/ },\n/* 36 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = isArray;\n\tif (!Array.isArray) {\n\t    Array.isArray = function (arg) {\n\t        return Object.prototype.toString.call(arg) === '[object Array]';\n\t    };\n\t}\n\t\n\tfunction isArray(arr) {\n\t    return Array.isArray(arr);\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tfunction isFunction(functionToCheck) {\n\t    var getType = {};\n\t    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n\t}\n\t\n\texports.default = isFunction;\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\tvar slice = [].slice;\n\tfunction toArray(list, index) {\n\t    var array = [];\n\t\n\t    index = index || 0;\n\t\n\t    for (var i = index || 0; i < list.length; i++) {\n\t        array[i - index] = list[i];\n\t    }\n\t\n\t    return array;\n\t}\n\texports.default = toArray;\n\n/***/ },\n/* 39 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _obserable = __webpack_require__(7);\n\t\n\tvar _obserable2 = _interopRequireDefault(_obserable);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _emitter = __webpack_require__(9);\n\t\n\tvar _emitter2 = _interopRequireDefault(_emitter);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Stream(fn) {\n\t    _obserable2.default.call(this);\n\t    this._fn = fn;\n\t}\n\t\n\tStream.prototype = Object.create(_obserable2.default.prototype);\n\t\n\t(0, _extend2.default)(Stream.prototype, {\n\t    _name: 'stream',\n\t\n\t    getType: function getType() {\n\t        return 'stream';\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        var fn = this._fn;\n\t        var unsubscribe = fn((0, _emitter2.default)(this));\n\t        this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        this._callUnSub();\n\t    },\n\t    _callUnSub: function _callUnSub() {\n\t        if (this._unsubscribe !== null) {\n\t            this._unsubscribe();\n\t            this._unsubscribe = null;\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        _obserable2.default.prototype._clear.call(this);\n\t        this._fn = null;\n\t    }\n\t});\n\t\n\texports.default = Stream;\n\n/***/ },\n/* 40 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _never = __webpack_require__(8);\n\t\n\tvar _never2 = _interopRequireDefault(_never);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar _common = __webpack_require__(13);\n\t\n\tvar _common2 = _interopRequireDefault(_common);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Merge(obs) {\n\t    _common2.default.call(this);\n\t    this._addAll(obs);\n\t}\n\t\n\tMerge.prototype = Object.create(_common2.default.prototype);\n\t\n\t(0, _extend2.default)(Merge.prototype, {\n\t    _name: 'merge',\n\t\n\t    _onEnd: function _onEnd() {\n\t        this.emitEnd();\n\t    }\n\t});\n\t\n\tmodule.exports = function merge(obs) {\n\t    return obs.length === 0 ? (0, _never2.default)() : new Merge(obs);\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\t\n\tvar _common = __webpack_require__(1);\n\t\n\tvar mixin = {\n\t    init: function init(_ref) {\n\t        var fn = _ref.fn;\n\t\n\t        this._fn = fn;\n\t    },\n\t    _free: function _free() {\n\t        this._fn = null;\n\t    },\n\t    _handleError: function _handleError(e) {\n\t        this.emitError(this._fn(e));\n\t    }\n\t};\n\t\n\tvar MapErrorStream = (0, _common.createStreamConstructor)('mapError', mixin);\n\tvar MapErrorProperty = (0, _common.createPropertyConstructor)('mapError', mixin);\n\t\n\tfunction mapError(source, fn) {\n\t    return new (source._ofSameType(MapErrorStream, MapErrorProperty))(source, { fn: fn });\n\t}\n\t\n\texports.default = mapError;\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = awaiting;\n\t\n\tvar _merge = __webpack_require__(40);\n\t\n\tvar _merge2 = _interopRequireDefault(_merge);\n\t\n\tvar _map = __webpack_require__(14);\n\t\n\tvar _map2 = _interopRequireDefault(_map);\n\t\n\tvar _mapError = __webpack_require__(41);\n\t\n\tvar _mapError2 = _interopRequireDefault(_mapError);\n\t\n\tvar _skipDuplicates = __webpack_require__(15);\n\t\n\tvar _skipDuplicates2 = _interopRequireDefault(_skipDuplicates);\n\t\n\tvar _toProperty = __webpack_require__(16);\n\t\n\tvar _toProperty2 = _interopRequireDefault(_toProperty);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar t = function t() {\n\t    return true;\n\t};\n\tvar f = function f() {\n\t    return false;\n\t};\n\t\n\tfunction awaiting(a, b) {\n\t    b = (0, _map2.default)(b, f).onError(function () {\n\t        b.emitValue(false);\n\t    });\n\t    var result = (0, _merge2.default)([(0, _map2.default)(a, t), b]);\n\t    result = (0, _skipDuplicates2.default)(result);\n\t    result = (0, _toProperty2.default)(result, f);\n\t    return result;\n\t}\n\n/***/ },\n/* 43 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.default = buffer;\n\t\n\tvar _connectTwoSource = __webpack_require__(45);\n\t\n\tvar mixins = {\n\t    init: function init() {\n\t        this._buff = [];\n\t    },\n\t    _free: function _free() {\n\t        this._buff = null;\n\t    },\n\t    _flush: function _flush() {\n\t        if (this._buff) {\n\t            this.emitValue(this._buff);\n\t            this._buff = [];\n\t        }\n\t    },\n\t    _onActivation: function _onActivation() {\n\t        this._mainOb.onAny(this._$handleMainAny);\n\t        if (this.state.alive && this._secondaryOb) {\n\t            this._secondaryOb.onAny(this._$handleSecondaryAny);\n\t        }\n\t    },\n\t    _handleMainValue: function _handleMainValue(v) {\n\t        this._buff.push(v);\n\t    },\n\t    _handleMainEnd: function _handleMainEnd() {\n\t        this._flush();\n\t        this.emitEnd();\n\t    },\n\t    _handleSecondaryValue: function _handleSecondaryValue(v) {\n\t        this._flush();\n\t    },\n\t    _handleSecondaryError: function _handleSecondaryError(err) {\n\t        this.emitError(err);\n\t    }\n\t};\n\t\n\tvar P = (0, _connectTwoSource.createProperty)('buffer', mixins);\n\tvar S = (0, _connectTwoSource.createStream)('buffer', mixins);\n\t\n\tfunction buffer(mainOb, secondaryOb, options) {\n\t    return new (mainOb._ofSameType(S, P))(mainOb, secondaryOb, options);\n\t}\n\n/***/ },\n/* 44 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _never = __webpack_require__(8);\n\t\n\tvar _never2 = _interopRequireDefault(_never);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _common = __webpack_require__(5);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Combine(obs, passive, combinator) {\n\t    var _this = this;\n\t\n\t    _Stream2.default.call(this);\n\t    this._obsCount = obs.length;\n\t    this._sources = (0, _list.concat)(obs, passive);\n\t    this._combinator = combinator || function (x) {\n\t        return x;\n\t    };\n\t    var len = this._sources.length;\n\t    this._lastestValues = new Array(len);\n\t    this._aliveCount = 0;\n\t    (0, _list.fill)(this._lastestValues, _common.M_NULL);\n\t    this._$handlers = [];\n\t    (0, _list.forEach)(this._sources, function (source, i) {\n\t        _this._$handlers.push(function (e) {\n\t            return _this._handleAny(e, i);\n\t        });\n\t    });\n\t}\n\t\n\tCombine.prototype = Object.create(_Stream2.default.prototype);\n\t\n\t(0, _extend2.default)(Combine.prototype, {\n\t    _name: 'combine',\n\t\n\t    _onActivation: function _onActivation() {\n\t        var sourceLen = this._sources.length;\n\t        this._aliveCount = this._obsCount;\n\t        //先处理passive流先, 防止当两个流同一时刻发出的时候（同步），能够保证_emitValueIfReady的正常运行\n\t        for (var i = this._aliveCount; i < sourceLen; i++) {\n\t            this._sources[i].onAny(this._$handlers[i]);\n\t        }\n\t        for (var i = 0; i < this._aliveCount; i++) {\n\t            this._sources[i].onAny(this._$handlers[i]);\n\t        }\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        var _this2 = this;\n\t\n\t        (0, _list.forEach)(this._sources, function (source, i) {\n\t            source.offAny(_this2._$handlers[i]);\n\t        });\n\t    },\n\t    _handleAny: function _handleAny(e, sourceIndex) {\n\t        var type = e.type;\n\t        if (type === _events.VALUE) {\n\t            this._lastestValues[sourceIndex] = e.value;\n\t            if (this._isBelongToObs(sourceIndex)) {\n\t                //如果是属于obs流，而不是passive流的话, obsCount之后的坐标都是passive的值了\n\t                this._emitValueIfReady();\n\t            }\n\t        } else if (type === _events.END) {\n\t            if (this._isBelongToObs(sourceIndex)) {\n\t                this._aliveCount--; //如果combind([a,b,...])的多个流中，结束的，则_aliveCount--。\n\t                if (this._aliveCount === 0) {\n\t                    this.emitEnd();\n\t                }\n\t            }\n\t        }\n\t    },\n\t    _isBelongToObs: function _isBelongToObs(index) {\n\t        return index < this._obsCount;\n\t    },\n\t    _emitValueIfReady: function _emitValueIfReady() {\n\t        var ready = true;\n\t        (0, _list.forEach)(this._lastestValues, function (val) {\n\t            if (val === _common.M_NULL) {\n\t                ready = false;\n\t            }\n\t        });\n\t        if (ready) {\n\t            this.emitValue(this._combinator.apply(this, this._lastestValues));\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        _Stream2.default.prototype._clear.call(this);\n\t        this._sources = null;\n\t        this._combinator = null;\n\t        this._lastestValues = null;\n\t        this._$handlers = null;\n\t    }\n\t});\n\t\n\tmodule.exports = function combine(obs, passive, combinator) {\n\t    if (typeof passive === 'function') {\n\t        combinator = passive;\n\t        passive = [];\n\t    }\n\t    if (!combinator) {\n\t        throw new Error('need combinator for combine');\n\t    }\n\t    return obs.length === 0 ? (0, _never2.default)() : new Combine(obs, passive, combinator);\n\t};\n\n/***/ },\n/* 45 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t    value: true\n\t});\n\texports.createProperty = exports.createStream = undefined;\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _Property = __webpack_require__(10);\n\t\n\tvar _Property2 = _interopRequireDefault(_Property);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar commonMixin = {\n\t    init: function init() {},\n\t    _free: function _free() {},\n\t    _flush: function _flush() {\n\t        if (this._buff) {\n\t            this.emitValue(this._buff);\n\t            this._buff = [];\n\t        }\n\t    },\n\t    _handleMainValue: function _handleMainValue(v) {\n\t        this.emitValue(v);\n\t    },\n\t    _handleMainError: function _handleMainError(err) {\n\t        this.emitError(err);\n\t    },\n\t    _handleMainEnd: function _handleMainEnd() {\n\t        this.emitEnd();\n\t    },\n\t    _handleSecondaryValue: function _handleSecondaryValue(v) {\n\t        this._lastSecondary = x;\n\t    },\n\t    _handleSecondaryError: function _handleSecondaryError(err) {\n\t        this.emitError(err);\n\t    },\n\t    _handleSecondaryEnd: function _handleSecondaryEnd() {},\n\t    _onActivation: function _onActivation() {\n\t        if (this.state.active) {\n\t            this._mainOb.onAny(this._$handleMainAny);\n\t        }\n\t        if (this._secondaryOb) {\n\t            this._secondaryOb.onAny(this._$handleSecondaryAny);\n\t        }\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        this._mainOb.offAny(this._$handleMainAny);\n\t        /**\n\t         * NOTE: 这里需要进行判断secondaryOb是否存在，是因为如果secondaryOb先结束\n\t         * 会进行释放，当前流进行Deactivation的时候，secondaryOb已经不存在了。\n\t         * 释放的操作在 _handleSecondaryAny 函数中，\n\t         */\n\t        if (this._secondaryOb) {\n\t            this._secondaryOb.offAny(this._$handlerSecondaryAny);\n\t        }\n\t    },\n\t    _handleMainAny: function _handleMainAny(e) {\n\t        switch (e.type) {\n\t            case _events.VALUE:\n\t                return this._handleMainValue(e.value);\n\t            case _events.ERROR:\n\t                return this._handleMainError(e.value);\n\t            case _events.END:\n\t                return this._handleMainEnd(e.value);\n\t        }\n\t    },\n\t    _handleSecondaryAny: function _handleSecondaryAny(e) {\n\t        switch (e.type) {\n\t            case _events.VALUE:\n\t                return this._handleSecondaryValue(e.value);\n\t            case _events.ERROR:\n\t                return this._handleSecondaryError(e.value);\n\t            case _events.END:\n\t                this._handleSecondaryEnd(e.value);\n\t                // NOTE: 移除secondary observable，处于性能考虑\n\t                return this._removeSecondaryOb();\n\t        }\n\t    },\n\t    _removeSecondaryOb: function _removeSecondaryOb() {\n\t        if (this._secondaryOb) {\n\t            this._secondaryOb.offAny(this._$handlerSecondaryAny);\n\t            this._$handlerSecondaryAny = null;\n\t            this._secondaryOb = null;\n\t        }\n\t    },\n\t    _clear: function _clear() {\n\t        _Stream2.default.prototype._clear.call(this);\n\t        this._mainOb = null;\n\t        this._secondaryOb = null;\n\t        this._lastSecondary = null;\n\t        this._$handlerSecondaryAny = null;\n\t        this._$handleMainAny = null;\n\t        this._free();\n\t    }\n\t};\n\t\n\tfunction createConstructor(BaseClass, name, userMixins) {\n\t    function ConnectTwoSource(mainOb, secondaryOb, options) {\n\t        var _this = this;\n\t\n\t        BaseClass.call(this);\n\t        this._mainOb = mainOb;\n\t        this._secondaryOb = secondaryOb;\n\t        this._name = mainOb._name + '.name';\n\t        this._$handleMainAny = function (e) {\n\t            return _this._handleMainAny(e);\n\t        };\n\t        this._$handleSecondaryAny = function (e) {\n\t            return _this._handleSecondaryAny(e);\n\t        };\n\t        this.init(options);\n\t    }\n\t\n\t    ConnectTwoSource.prototype = Object.create(BaseClass.prototype);\n\t    (0, _extend2.default)(ConnectTwoSource.prototype, commonMixin, userMixins);\n\t    return ConnectTwoSource;\n\t}\n\t\n\tfunction createStream(name, mixins) {\n\t    return createConstructor(_Stream2.default, name, mixins);\n\t}\n\t\n\tfunction createProperty(name, mixins) {\n\t    return createConstructor(_Property2.default, name, mixins);\n\t}\n\t\n\texports.createStream = createStream;\n\texports.createProperty = createProperty;\n\n/***/ },\n/* 46 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Stream = __webpack_require__(4);\n\t\n\tvar _Stream2 = _interopRequireDefault(_Stream);\n\t\n\tvar _extend = __webpack_require__(2);\n\t\n\tvar _extend2 = _interopRequireDefault(_extend);\n\t\n\tvar _never = __webpack_require__(8);\n\t\n\tvar _never2 = _interopRequireDefault(_never);\n\t\n\tvar _events = __webpack_require__(3);\n\t\n\tvar _list = __webpack_require__(6);\n\t\n\tvar _spread = __webpack_require__(47);\n\t\n\tvar _spread2 = _interopRequireDefault(_spread);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tfunction Zip(obs, combinator) {\n\t    var _this = this;\n\t\n\t    _Stream2.default.call(this);\n\t\n\t    this._sources = obs;\n\t    this._buffers = (0, _list.map)(this._sources, function (source) {\n\t        return [];\n\t    });\n\t    this._combinator = combinator ? (0, _spread2.default)(combinator) : function (x) {\n\t        return x;\n\t    };\n\t    this._$handlers = [];\n\t    this._aliveCount = 0;\n\t    (0, _list.forEach)(this._sources, function (source, i) {\n\t        _this._$handlers.push(function (e) {\n\t            return _this._handleAny(e, i);\n\t        });\n\t    });\n\t}\n\t\n\tZip.prototype = Object.create(_Stream2.default.prototype);\n\t\n\t(0, _extend2.default)(Zip.prototype, {\n\t\n\t    _name: 'zip',\n\t\n\t    _onActivation: function _onActivation() {\n\t        var sourceLen = this._sources.length;\n\t        this._aliveCount = sourceLen;\n\t        for (var i = 0; i < sourceLen; i++) {\n\t            this._sources[i].onAny(this._$handlers[i]);\n\t        }\n\t    },\n\t    _onDeactivation: function _onDeactivation() {\n\t        var _this2 = this;\n\t\n\t        (0, _list.forEach)(this._sources, function (source, i) {\n\t            source.offAny(_this2._$handlers[i]);\n\t        });\n\t    },\n\t    _handleAny: function _handleAny(e, sourceIndex) {\n\t        var type = e.type;\n\t        if (type === _events.VALUE) {\n\t            this._buffers[sourceIndex].push(e.value);\n\t            this._emitValueIfReady();\n\t        } else if (type === _events.ERROR) {\n\t            this.emitError(e.value);\n\t        } else if (type === _events.END) {\n\t            this._aliveCount--;\n\t            if (this._aliveCount === 0) {\n\t                this.emitEnd();\n\t            }\n\t        }\n\t    },\n\t    _emitValueIfReady: function _emitValueIfReady() {\n\t        var isReady = true;\n\t        (0, _list.forEach)(this._buffers, function (buffer) {\n\t            isReady = isReady && buffer.length > 0;\n\t        });\n\t        if (isReady) {\n\t            this._emit();\n\t        }\n\t    },\n\t    _emit: function _emit() {\n\t        var values = (0, _list.map)(this._buffers, function (buffer) {\n\t            return buffer.shift();\n\t        });\n\t        this.emitValue(this._combinator(values));\n\t    },\n\t    _clear: function _clear() {\n\t        _Stream2.default.prototype._clear.call(this);\n\t        this._sources = null;\n\t        this._combinator = null;\n\t        this._buffers = null;\n\t        this._$handlers = null;\n\t    }\n\t});\n\t\n\tmodule.exports = function combine(obs, combinator) {\n\t    return obs.length === 0 ? (0, _never2.default)() : new Zip(obs, combinator);\n\t};\n\n/***/ },\n/* 47 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function spread(fn) {\n\t    return function (values) {\n\t        return fn.apply(null, values);\n\t    };\n\t};\n\n/***/ }\n/******/ ])\n});\n;\n\n\n/** WEBPACK FOOTER **\n ** qs.pro.js\n **/"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/build/\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap e6b65f97fb6d028726d3\n **/","import './polyfill/bind';\nimport isFunction  from './polyfill/isFunction';\nimport toArray from './polyfill/toArray';\nimport {DROP_OLD} from './constants/common';\nimport Observable from './obserable';\nimport emitter from './emitter';\nimport extend from './polyfill/extend';\nimport Stream from './Stream';\nimport map from './functions/map';\nimport mapError from './functions/mapError';\nimport filter from './functions/filter';\nimport take from './functions/take';\nimport takeWhile from './functions/takeWhile';\nimport debounce from './functions/debounce';\nimport throttle from './functions/throttle';\nimport last from './functions/last';\nimport scan from './functions/scan';\nimport delay from './functions/delay';\nimport awaiting from './connect/awaiting';\nimport toProperty from './functions/toProperty';\nimport flatMap from './connect/flatMap';\nimport combine from './connect/combine';\nimport merge from './connect/merge';\nimport buffer from './connect/buffer';\nimport skip from './functions/skip';\nimport skipDuplicates from './functions/skipDuplicates';\nimport skipWhile from './functions/skipWhile';\nimport flatten from './functions/flatten';\nimport fromEvents from './functions/static/fromEvents';\nimport fromPromise  from './functions/static/fromPromise';\n\n\nconst methodMap = {\n    'text': 'innerText',\n    'html': 'innerHTML'\n};\n\n\n/**\n * qs 的默认调用会产生一个stream出来,\n */\nfunction qs(fn) {\n    return new Stream(fn);\n}\n\n/**\n * QS的静态方法\n *\n * 其中有\n *\n * \t- 时间函数如seq, interval,delay等\n * \t- 流的合并函数 merge, combine, zip\n */\n\nqs.fromEvents = fromEvents;\nqs.fromPromise = fromPromise;\n\n//时间函数\nqs.seq = require('./functions/time/seq');\nqs.interval = require('./functions/time/interval');\nqs.delay = require('./functions/time/delay');\n\n//流合并函数\nqs.merge = merge;\nqs.combine = combine;\nqs.zip = require('./connect/zip');\n\n//常量函数\nqs.constant = require('./functions/constant');\nqs.never = require('./functions/never');\n\n\n/**\n * Prototype方法\n */\nextend(Observable.prototype, {\n    map(fn) {\n        return map(this, fn);\n    },\n\n    mapError(fn) {\n        return mapError(ob, fn);\n    },\n\n    filter(fn) {\n        return filter(this, fn);\n    },\n\n    take(n) {\n        return take(this, n);\n    },\n\n    takeWhile(fn) {\n        return takeWhile(this, fn);\n    },\n\n    assign(el, method) {\n        return this.onValue( val => {\n            el[method] = val;\n        });\n    },\n\n    skip(n) {\n        return skip(this, n);\n    },\n\n    skipWhile(fn) {\n        return skipWhile(this, fn);\n    },\n\n    skipDuplicates(fn) {\n        return skipDuplicates(this, fn);\n    },\n\n    debounce(wait, immediate) {\n        return debounce(this, wait, immediate);\n    },\n\n    throttle(wait, leading, trailing) {\n        return throttle(this, wait, leading, trailing);\n    },\n\n    flatten(fn) {\n        return flatten(this, fn);\n    },\n\n    delay(time) {\n        return delay(this, time);\n    },\n\n    toProperty(fn) {\n        return toProperty(this, fn);\n    },\n\n    flatMap(fn) {\n        return flatMap(this, fn);\n    },\n\n    flatMapFirst(fn) {\n        return flatMap(this, fn, {obsLimit: 1});\n    },\n\n    flatMapLatest(fn) {\n        return flatMap(this, fn, {obsLimit: 1, drop: DROP_OLD});\n    },\n\n    combine(ob, combinator) {\n        return combine([this, ob], combinator);\n    },\n\n    merge(ob) {\n        return merge([this, ob]);\n    },\n\n    buffer(ob) {\n        return buffer(this, ob);\n    },\n\n    scan(fn, seed) {\n        return scan(this, fn, seed);\n    },\n\n    last() {\n        return last(this);\n    },\n\n    awaiting(ob) {\n        return awaiting(this, ob);\n    },\n\n    and(ob) {\n        return combine([this, ob], (a, b) => a && b);\n    },\n\n    not() {\n        return this.map(val => !val);\n    },\n\n    pluck() {\n        let args = toArray(arguments);\n        let getVal = (v) => {\n            for (let i = 0, len = args.length; i < len; i++) {\n                v = v[args[i]];\n            }\n            return v;\n        }\n        return this.map((e) => {\n            return getVal(e);\n        });\n    }\n});\n\nmodule.exports = qs;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/qs.js\n **/","import Stream from '../Stream';\nimport Property from '../Property';\nimport extend from '../polyfill/extend';\nimport {ANY, VALUE, END, ERROR} from '../constants/events';\n\nconst commonMixin = {\n    init() {},\n    _free() {},\n\n    _handleAny(e) {\n        switch(e.type) {\n            case VALUE: return this._handleValue(e.value);\n            case ERROR: return this._handleError(e.value);\n            case ANY: return this._handleValue(e);\n            case END: return this._handleEnd();\n        }\n    },\n\n    _handleValue(x) {\n        this.emitValue(x);\n    },\n\n    _handleEnd() {\n        this.emitEnd();\n    },\n\n    _handleError(e) {\n        this.emitError(e);\n    },\n\n    _onActivation() {\n        this._source.onAny(this._$handleAny);\n    },\n\n    _onDeactivation() {\n        this._source.offAny(this._$handleAny);\n    }\n};\n\n\nfunction createStreamConstructor(name, mixin) {\n    function NewStream(source, options) {\n        Stream.call(this);\n        this._source = source;\n        this._name = `${source._name}.${name}`;\n        this._$handleAny = (e) => this._handleAny(e);\n        this.init(options);\n    }\n\n    NewStream.prototype = Object.create(Stream.prototype);\n    extend(NewStream.prototype, commonMixin, {\n        _clear() {\n            Stream.prototype._clear.call(this);\n            this._free();\n            this._source = null;\n            this._$handleAny = null;\n        }\n    }, mixin);\n    return NewStream;\n}\n\n\n\n\n\nfunction createPropertyConstructor(name, mixin) {\n    function NewProperty(source, options) {\n        Property.call(this);\n        this._source = source;\n        this._name = `${source._name}.${name}`;\n        this._$handleAny = (e) => this._handleAny(e);\n        this.init(options);\n    }\n\n    NewProperty.prototype = Object.create(Property.prototype);\n    extend(NewProperty.prototype, commonMixin, {\n        _clear() {\n            Property.prototype._clear.call(this);\n            this._free();\n            this._source = null;\n            this._$handleAny = null;\n        }\n    }, mixin);\n    return NewProperty;\n}\n\n\n\nfunction createTimeBaseStreamConstructor(name, mixin) {\n    function TimeBaseStream(wait, options) {\n        Stream.call(this);\n        this._wait = wait;\n        this._intervalId = null;\n        this._name = `${name}Stream`;\n        this._$onTick = () => this._onTick();\n        this.init(options);\n    }\n\n    TimeBaseStream.prototype = Object.create(Stream.prototype);\n    extend(TimeBaseStream.prototype, {\n        init() {},\n        _free() {},\n        _onActivation() {\n            this._intervalId = setInterval(this._$onTick, this._wait);\n        },\n\n        _onDeactivation() {\n            if (this._intervalId !== null) {\n                clearInterval(this._intervalId);\n                this._intervalId = null;\n            }\n        },\n\n        _clear() {\n            Stream.prototype._clear.call(this);\n            this._free();\n            this._$onTick = null;\n        }\n    }, mixin);\n    return TimeBaseStream;\n}\n\n\nexport {\n    createStreamConstructor,\n    createTimeBaseStreamConstructor,\n    createPropertyConstructor\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/common.js\n **/","function extend(target /* mixins ...*/) {\n    let length = arguments.length, i, prop;\n    for (i = 1; i < length; i++) {\n        for (prop in arguments[i]) {\n            target[prop] = arguments[i][prop];\n        }\n    }\n    return target;\n}\n\nexport default extend;\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/extend.js\n **/","const VALUE = 'value';\nconst ANY = 'any';\nconst END = 'end';\nconst ERROR = 'error';\nexport { VALUE, ANY, END, ERROR};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/events.js\n **/","import Observable from './obserable';\nimport extend from './polyfill/extend';\nimport emitter from './emitter';\n\n\nfunction Stream(fn) {\n    Observable.call(this);\n    this._fn = fn;\n}\n\nStream.prototype = Object.create(Observable.prototype);\n\nextend(Stream.prototype, {\n    _name: 'stream',\n\n    getType() {\n        return 'stream';\n    },\n\n    _onActivation() {\n        const fn = this._fn;\n        const unsubscribe = fn(emitter(this));\n        this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n    },\n\n    _onDeactivation() {\n        this._callUnSub();\n    },\n\n    _callUnSub() {\n        if (this._unsubscribe !== null) {\n            this._unsubscribe();\n            this._unsubscribe = null;\n        }\n    },\n\n    _clear() {\n        Observable.prototype._clear.call(this);\n        this._fn = null;\n    }\n});\n\n\nexport default Stream;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/Stream.js\n **/","const M_NULL = '{<_+null+_>}';\nconst DROP_OLD = 'drop_old';\nexport { M_NULL, DROP_OLD };\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/constants/common.js\n **/","function remove(arr, index) {\n    let originLen = arr.length, result;\n    if (index >= 0 && index < originLen) {\n        if (originLen === 1) {\n            result = [];\n        } else {\n            result = new Array(originLen - 1);\n            for (let i = 0, j = 0; i < originLen; i++) {\n                if (i !== index) {\n                    result[j] = arr[i];\n                    j++;\n                }\n            }\n        }\n    } else {\n        result = arr;\n    }\n    return result;\n}\n\n\nfunction concat(a, b) {\n    return a.concat(b);\n}\n\n\nfunction find(arr, v) {\n    for (let i = 0, len =arr.length; i < len; i++) {\n        if (arr[i] === v) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nfunction findBy(arr, pred) {\n    for (let i = 0, len =arr.length; i < len; i++) {\n        if (pred(arr[i])) {\n            return i;\n        }\n    }\n    return -1;\n}\n\nfunction contains(arr, val) {\n    return find(arr, val) !== -1;\n}\n\n\nfunction forEach(arr, fn) {\n    for (let i = 0 , len = arr.length; i < len; i++) {\n        fn(arr[i], i);\n    }\n}\n\nfunction map(arr, fn) {\n    let len = arr.length;\n    var mapArr = new Array(len);\n    for (let i = 0; i < len; i++) {\n        mapArr[i] = fn(arr[i], i);\n    }\n    return mapArr;\n}\n\nfunction fill(arr, val) {\n    var len = arr.length,\n        i;\n    for (i = 0; i < len; i++) {\n        arr[i] = val;\n    }\n}\n\nexport {remove, concat, find, findBy, contains, forEach, fill, map};\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/list.js\n **/","import extend from './polyfill/extend';\nimport {Dispatcher, callSubcribers} from './dispatcher';\nimport {VALUE, END, ANY, ERROR} from './constants/events';\n\nfunction Observable() {\n    this._dispatcher = new Dispatcher();\n    this.state = {\n        alive: true,\n        active: false\n    };\n}\n\n\nextend(Observable.prototype, {\n    _name: 'obserable',\n\n    setState(name, value) {\n        this.state[name] = value;\n    },\n\n    _onActivation() {},\n    _onDeactivation() {},\n\n    emit(type, v) {\n        switch(type) {\n            case VALUE: return this.emitValue(v);\n            case ERROR: return this.emitError(x);\n            case END: return this.emitEnd();\n        }\n    },\n\n    emitValue(value) {\n        if (this.state.alive) {\n            this._dispatcher.dispatch({type: VALUE, value}, this);\n        }\n    },\n\n    emitEnd() {\n        if (this.state.alive) {\n            this.setState('alive', false);\n            this._dispatcher.dispatch({type: END}, this);\n            this._clear();\n        }\n    },\n\n    emitError(value) {\n        if (this.state.alive) {\n            this._dispatcher.dispatch({type: ERROR, value});\n        }\n    },\n\n    onValue(fn) {\n        return this._on(VALUE, fn);\n    },\n\n    offValue(fn) {\n        return this._off(VALUE, fn);\n    },\n\n    onEnd(fn) {\n        return this._on(END, fn);\n    },\n\n    offEnd(fn) {\n        return this._off(END, fn);\n    },\n\n    onAny(fn) {\n        return this._on(ANY, fn);\n    },\n\n    offAny(fn) {\n        return this._off(ANY, fn);\n    },\n\n    onError(fn) {\n        return this._on(ERROR, fn);\n    },\n\n    offError(fn) {\n        return this._off(ERROR, fn);\n    },\n\n    _on(type, fn) {\n        if (this.state.alive) {\n            this._dispatcher.add(type, fn);\n            this._setActive(true);\n        } else {\n            callSubcribers(type, fn, {type: END});\n        }\n        return this;\n    },\n\n    _off(type, fn) {\n        if (this.state.alive) {\n            let count = this._dispatcher.remove(type, fn);\n            if (count === 0) {\n                this._setActive(false);\n            }\n        }\n        return this;\n    },\n\n    _setActive(active) {\n        if (this.state.active !== active) {\n            this.setState('active', active);\n            if (active) {\n                //激活\n                this._activating = true;\n                this._onActivation();\n                this._activating = false;\n            } else {\n                this._onDeactivation();\n            }\n        }\n    },\n\n    _clear() {\n        this._setActive(false);\n        this._dispatcher.cleanup();\n        this._dispatcher = null;\n    },\n\n    _ofSameType(A, B) {\n        return A.prototype.getType() === this.getType() ? A : B;\n    }\n});\n\n\nexport default Observable;\n\n\n/** WEBPACK FOOTER **\n ** ./src/obserable.js\n **/","import Stream from '../stream';\n\n\nconst neverStream = new Stream();\nneverStream.emitEnd();\nneverStream._name = 'never';\n\nmodule.exports = function never() {\n  return neverStream;\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/never.js\n **/","function emitter(obs) {\n\n    function value(x) {\n        obs.emitValue(x);\n        return obs.state.active;\n    }\n\n    function event(e) {\n        obs.emit(e.type, e.value);\n        return obs.state.active;\n    }\n\n    function end() {\n        obs.emitEnd();\n        return obs.state.active;\n    }\n\n    function error(e) {\n        obs.emitError(e);\n        return obs.state.active;\n    }\n\n    return {\n        value,\n        event,\n        error,\n        emit: value,\n        emitEvent: event,\n        end: end\n    };\n}\n\n\nexport default emitter;\n\n\n/** WEBPACK FOOTER **\n ** ./src/emitter.js\n **/","import Observable from './obserable';\nimport extend from './polyfill/extend';\nimport {VALUE, END, ERROR} from './constants/events';\nimport {callSubcribers} from './dispatcher';\n\n\nfunction Property() {\n    Observable.call(this);\n    this._currentEvent = null;\n}\n\nProperty.prototype = Object.create(Observable.prototype);\n\nextend(Property.prototype, {\n    _name: 'property',\n\n    getType() {\n        return 'property';\n    },\n\n    emitValue(value) {\n        if (this.state.alive) {\n            this._currentEvent = {type: VALUE, value};\n            if (!this._activating) {\n                this._dispatcher.dispatch({type: VALUE, value});\n            }\n        }\n    },\n\n    emitEnd() {\n        if (this.state.alive) {\n            this.setState('alive', false);\n            if (!this._activating) {\n                this._dispatcher.dispatch({type: END});\n            }\n            this._clear();\n        }\n    },\n\n    emitError(value) {\n        if (this.state.alive) {\n            this._currentEvent = {type: ERROR, value};\n            if (!this._activating) {\n                this._dispatcher.dispatch({type: ERROR, value});\n            }\n        }\n    },\n\n    _on(type, fn) {\n        if (this.state.alive) {\n            this._dispatcher.add(type, fn);\n            this._setActive(true);\n        }\n        if (this._currentEvent !== null) {\n            callSubcribers(type, fn, this._currentEvent);\n        }\n        if (!this.state.alive) {\n            callSubcribers(type, fn, {type:END});\n        }\n        return this;\n    }\n});\n\n\nexport default Property;\n\n\n/** WEBPACK FOOTER **\n ** ./src/Property.js\n **/","import extend from './polyfill/extend';\nimport {VALUE, END, ANY, ERROR} from './constants/events';\nimport {remove, concat, contains} from './polyfill/list';\nfunction Dispatcher() {\n    this._cbs = [];\n    this._inLoop = 0;\n    this._removedCbs = [];\n}\n\n\nfunction callSubcribers(type, fn, event) {\n    if (type === ANY) {\n        fn(event);\n    } else if (type === event.type) {\n        if (type === VALUE || type === ERROR) {\n            fn(event.value);\n        } else if (type === END){\n            fn();\n        }\n    }\n}\n\n\nextend(Dispatcher.prototype, {\n    add(type, fn) {\n        this._cbs.push({type, fn});\n    },\n\n    remove(type, fn) {\n        let cbs = this._cbs;\n        let index = null;\n        for (let i = 0, len = cbs.length; i < len; i++) {\n            let cb = cbs[i];\n            if (type === cb.type && cb.fn === fn) {\n                index = i;\n            }\n        }\n        //如果在通知的循环中，则将移除的cb添加到_removeCbs中\n        if (this._inLoop !== 0 && index !== null) {\n            this._removedCbs.push(this._cbs[index]);\n        }\n        this._cbs = remove(this._cbs, index);\n\n        return this._cbs.length;\n    },\n\n\n\n    dispatch(event, source) {\n        this._inLoop++;\n        for (let i = 0, cbs = this._cbs; i < cbs.length; i++) {\n            let cb = cbs[i];\n            if (this._cbs === null) { break; } //if cleanup\n            if (contains(this._removedCbs, cb)) { continue; } //移除的话，不需要继续执行\n            callSubcribers(cb.type, cb.fn, event);\n        }\n        this._inLoop--;\n        if (this._inLoop === 0) {\n            this._removedCbs = [];\n        }\n    },\n\n    cleanup() {\n        this._cbs = null;\n        this._removedCbs = null;\n    }\n});\n\n\nexport {Dispatcher, callSubcribers};\n\n\n/** WEBPACK FOOTER **\n ** ./src/dispatcher.js\n **/","export default Date.now ? (() => Date.now()) : (() => new Date().getTime());\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/now.js\n **/","import Stream from '../Stream';\nimport extend from '../polyfill/extend';\nimport {VALUE, ANY, END, ERROR} from '../constants/events';\nimport {forEach, concat, findBy, remove} from '../polyfill/list';\nimport {DROP_OLD} from '../constants/common';\nconst NO_LIMIT = -1;\n\nconst id = x => x;\nfunction ConnectCommon(options) {\n    Stream.call(this);\n    this.init(options);\n}\n\nConnectCommon.prototype = Object.create(Stream.prototype);\n\nextend(ConnectCommon.prototype, {\n    init({obsLimit = NO_LIMIT, drop} = {}) {\n        this._obs = [];\n        this._obsLimit = obsLimit;\n        this._drop = drop;\n        this._endHandlers = [];\n        this._$handleAny = (e) => this._handleAny(e);\n    },\n\n    _handleAny(e) {\n        switch(e.type) {\n            case VALUE: return this.emitValue(e.value);\n            case ERROR: return this.emitError(e.value);\n        }\n    },\n\n    _addAll(obs){\n        forEach(obs, ob => this._add(ob));\n    },\n\n    _add(ob, transformer = id) {\n        const obsLimit = this._obsLimit;\n        if (obsLimit === NO_LIMIT || this._obs.length < obsLimit) {\n            //如果没有限制， 或者没有超出监听队列的限制, 则继续添加监听\n            this._addToObs(transformer(ob));\n        } else {\n            //如果超出，且允许移除最旧的spawn的流，则移除之后，然后spawn出新的流\n            //不允许移除的话，则什么都不做, 这种情况就类似与，直到上一个流结束，才能够添加新的流，可以实现flatMapFirst()的效果\n            if (this._drop === DROP_OLD) {\n                this._removeFromObs(this._obs[0]);\n                //继续调用添加接口，直到可以加入为止。\n                this._add(ob, transformer);\n            }\n        }\n    },\n\n    _addToObs(ob) {\n        if (this.state.active) {\n            let e = ob._currentEvent;\n            if (!ob.state.alive) {\n                if (ob._currentEvent) { this.emit(e.type, e.value); }\n                return;\n            }\n            this._obs = concat(this._obs, [ob]);\n            this._subscribe(ob);\n        } else {\n            this._obs = concat(this._obs, [ob]);\n        }\n    },\n\n    _onActivation() {\n        forEach(this._obs, (ob) => this._subscribe(ob));\n    },\n\n    _onDeactivation() {\n        forEach(this._obs, (ob) => this._unsubscribe(ob));\n    },\n\n    _subscribe(ob) {\n        ob.onAny(this._$handleAny);\n        //在上面这个步骤状态可能会变为inactive, 这样子，就没有必要监听End事件\n        if (this.state.active) {\n            this._subEndOf(ob);\n        }\n    },\n\n    _unsubscribe(ob) {\n        ob.offAny(this._$handleAny);\n        this._unsubEndOf(ob);\n    },\n\n    _subEndOf(ob) {\n        const endHandler = () => this._removeFromObs(ob);\n        this._endHandlers.push({ob: ob, handler: endHandler});\n        ob.onEnd(endHandler);\n    },\n\n    _unsubEndOf(ob) {\n        var index = findBy(this._endHandlers, (ed) => ed.ob === ob);\n        if (index !== -1) {\n            ob.offEnd(this._endHandlers[index].handler);\n            this._endHandlers = remove(this._endHandlers, index);\n        }\n    },\n\n    _removeFromObs(ob) {\n        //active状态下才需要unsub,如果是inative的时候，由于没有sub过，也就无需unsub了\n        if (this.state.active) {\n            this._unsubscribe(ob);\n        }\n        var index = findBy(this._obs, (item) => item === ob);\n        this._obs = remove(this._obs, index);\n        if (index !== -1) {\n            //如果监听的所有observer都已经结束了，那么merge流也可以结束了.\n            if (this._isEnd()) {\n                this._onEnd();\n            }\n        }\n        return index;\n    },\n\n    _isEnd() {\n        return  this._obs.length === 0;\n    },\n\n    _clear(){\n        Stream.prototype._clear.call(this);\n        this._obs = null;\n        this._$handleAny = null;\n        this._endHandlers = null;\n    }\n});\n\nexport default ConnectCommon;\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/common.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\n\n\nconst mixin = {\n    init({fn}) {\n        if (typeof fn !== 'function') {\n            //处理 .map(1) 的情形， 这种调用方式表示  fn = () => 1\n            this._fn = () => fn;\n        } else {\n            this._fn = fn;\n        }\n    },\n\n    _free() {\n        this._fn = null;\n    },\n\n    _handleValue(x) {\n        this.emitValue(this._fn(x));\n    }\n};\n\nconst MapStream = createStreamConstructor('map', mixin);\nconst MapProperty = createPropertyConstructor('map', mixin);\n\nfunction map(source, fn) {\n    return new (source._ofSameType(MapStream, MapProperty))(source, {fn});\n}\n\n\n\nexport default map;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/map.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\nimport {M_NULL } from '../constants/common';\nconst equal = (a,b) => a === b;\n\nconst mixin = {\n    init({fn}) {\n        this._pv = M_NULL;\n        this._fn = fn;\n    },\n\n    _free() {\n        this._pv = null;\n        this._fn = null;\n    },\n\n    _handleValue(x) {\n        if (this._pv === M_NULL || !this._fn(this._pv, x)) {\n            this._pv = x;\n            this.emitValue(x);\n        }\n    }\n};\n\nconst S = createStreamConstructor('skipDuplicates', mixin);\nconst P = createPropertyConstructor('skipDuplicates', mixin);\n\nexport default function skipDuplicates(source, fn = equal) {\n    return new (source._ofSameType(S, P))(source, {fn});\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/skipDuplicates.js\n **/","import {createPropertyConstructor} from './common';\nimport {M_NULL} from '../constants/common';\n\n\nconst mixin = {\n    init({fn}) {\n        this._getInitialValue = fn;\n    },\n\n    _onActivation() {\n        if (this._getInitialValue !== null) {\n            this.emitValue(this._getInitialValue());\n        }\n        this._source.onAny(this._$handleAny);\n    }\n};\n\nconst P = createPropertyConstructor('toProperty', mixin);\n\nmodule.exports = function toProperty(ob, fn = null) {\n    return new P(ob, {fn});\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/toProperty.js\n **/","import extend from '../polyfill/extend';\nimport never from '../functions/never';\nimport {VALUE, ANY, END, ERROR} from '../constants/events';\nimport {forEach, concat, findBy, remove} from '../polyfill/list';\nimport Common from './common';\n\n\n\nfunction FlatMap(source, fn, options) {\n    Common.call(this, options);\n    this._source = source;\n    this._fn = fn;\n    this._sourceEnded = false;\n    this._$handlerSource = (e) => this._handleSource(e);\n}\n\nFlatMap.prototype = Object.create(Common.prototype);\n\nextend(FlatMap.prototype, {\n    _name: 'flatMap',\n\n    _onActivation () {\n        Common.prototype._onActivation.call(this);\n        if (this.state.active) {\n            //active状态下监听souce的所有事件\n            this._source.onAny(this._$handlerSource);\n        }\n    },\n\n    _onDeactivation() {\n        Common.prototype._onDeactivation.call(this);\n        this._source.offAny(this._$handlerSource);\n    },\n\n    _handleSource(e) {\n        let eventType = e.type;\n        if (eventType === VALUE) {\n            //使用source的value来spawn新的流，this._fn会返回新的流\n            this._add(e.value, this._fn);\n        } else if (eventType === ERROR) {\n            this.emitError(e.value);\n        } else if (eventType === END) {\n            //源头结束，而spawn出来的流都已经结束，可以直接发出结束\n            if (this._isEnd()) {\n                this.emitEnd();\n            }\n            this._sourceEnded = true;\n        }\n    },\n\n    _onEnd() {\n        //如果源头还没有结束，先hold着，后面还有新的value进来要spawn\n        if (this._sourceEnded) {\n            //如果源头已经结束，就可以emitEnd了\n            this.emitEnd();\n        }\n    },\n\n    _clear(){\n        this._source = null;\n        this._fn = null;\n        this._$handlerSource = null;\n    }\n});\n\nmodule.exports = function flatMap(obs, fn, options) {\n    return new FlatMap(obs, fn, options);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/flatMap.js\n **/","import Property from '../Property';\nimport {VALUE} from '../constants/events';\nimport extend from '../polyfill/extend';\n\n\nfunction Constant(value) {\n    this._currentEvent = {type: VALUE, value};\n}\n\nConstant.prototype = Object.create(Property.prototype);\n\nextend(Constant.prototype, {\n    state: {\n        alive: false,\n        active: false\n    },\n    _activating: false\n});\n\nmodule.exports = function constant(value) {\n    return new Constant(value);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/constant.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\nimport {END} from '../constants/events';\nimport now from '../polyfill/now';\n\nconst mixin = {\n    init({ wait, immediate }) {\n        this._wait = Math.max(0, wait);\n        this._immediate = immediate;\n        this._lastAttempt = 0;\n        this._timeoutId = null;\n        this._laterValue = null;\n        this._endLater = false;\n        this._$later = () => this._later();\n    },\n\n    _free() {\n        this._laterValue = null;\n        this._$later = null;\n    },\n\n    _handleValue(x) {\n        if (this._activating) {\n            this.emitValue(x);\n        } else {\n            this._lastAttempt = now();\n            if (this._immediate && !this._timeoutId) {\n                this.emitValue(x);\n            }\n            if (!this._timeoutId) {\n                this._timeoutId = setTimeout(this._$later, this._wait);\n            }\n            if (!this._immediate) {\n                this._laterValue = x;\n            }\n        }\n    },\n\n    _handleEnd() {\n        if (this._activating) {\n            this.emitEnd();\n        } else {\n            if (this._timeoutId && !this._immediate) {\n                this._endLater = true;\n            } else {\n                this.emitEnd();\n            }\n        }\n    },\n\n    _later() {\n        let last = now() - this._lastAttempt;\n        if (last < this._wait && last >= 0) {\n            this._timeoutId = setTimeout(this._$later, this._wait - last);\n        } else {\n            this._timeoutId = null;\n            if (!this._immediate) {\n                this.emitValue(this._laterValue);\n                this._laterValue = null;\n            }\n            if (this._endLater) {\n                this.emitEnd();\n            }\n        }\n    }\n\n};\n\nconst S = createStreamConstructor('debounce', mixin);\nconst P = createPropertyConstructor('debounce', mixin);\n\nexport default function debounce(source, wait, immediate) {\n    return new (source._ofSameType(S, P))(source, {wait, immediate});\n}\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/debounce.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\nconst END = 'buff_end';\n\n\nconst mixin = {\n    init({time}) {\n        this._time = time;\n        this.$handler = (e) => this._handleValue(e);\n        this._buff = [];\n        this._shiftBuff = () => {\n            const val = this._buff.shift();\n            if (val === END) {\n                this.emitEnd();\n            } else {\n                this.emitValue(val);\n            }\n        }\n    },\n\n    _free() {\n        this._buff = null;\n        this._shiftBuff = null;\n    },\n\n    _handleValue(x) {\n        this._buff.push(x);\n        setTimeout(this._shiftBuff, this._time);\n    },\n\n    _handleEnd() {\n        this._buff.push(END);\n        setTimeout(this._shiftBuff, this._time);\n    }\n};\n\nconst S = createStreamConstructor('delay', mixin);\nconst P = createPropertyConstructor('delay', mixin);\n\n\nexport default function delay(source, time) {\n    return new (source._ofSameType(S, P))(source, {time});\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/delay.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\n\n\nconst mixin = {\n    init({fn}) {\n        this._fn = fn;\n    },\n\n    _free() {\n        this._fn = null;\n    },\n\n    _handleValue(x) {\n        if (this._fn(x)) {\n            this.emitValue(x);\n        }\n    }\n\n};\n\n\nconst FilterStream = createStreamConstructor('filter', mixin);\nconst FilterProperty = createPropertyConstructor('filter', mixin);\n\n\nfunction filter(source, fn) {\n    return new (source._ofSameType(FilterStream, FilterProperty))(source, {fn});\n}\n\n\n\nexport default filter;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/filter.js\n **/","import {createStreamConstructor} from './common';\nimport isArray from '../polyfill/isArray';\nimport {forEach} from '../polyfill/list';\n\nconst mixin = {\n    init({fn}) {\n        this._fn = fn;\n    },\n\n    _free() {\n        this._fn = null;\n    },\n\n    _handleValue(arr) {\n        const x = this._fn(arr);\n        if (isArray (x)) {\n            forEach(x, (v) => this.emitValue(v));\n        } else {\n            this.emitValue(x);\n        }\n    }\n};\n\nconst S = createStreamConstructor('flatten', mixin);\n\nconst id = x => x;\nfunction flatten(source, fn = id) {\n    return new S(source, {fn});\n}\n\n\n\nexport default flatten;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/flatten.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\nimport {M_NULL} from '../constants/common';\n\n\nconst mixin = {\n    init() {\n        this._lastValue = M_NULL;\n    },\n\n    _free() {\n        this._lastValue = null;\n    },\n\n    _handleValue(val) {\n        this._lastValue = val;\n    },\n\n    _handleEnd() {\n        if (this._lastValue !== M_NULL) {\n            this.emitValue(this._lastValue);\n        }\n        this.emitEnd();\n    }\n\n};\n\nconst S = createStreamConstructor('last', mixin);\nconst P = createPropertyConstructor('last', mixin);\n\n\nfunction last(source) {\n    return new (source._ofSameType(S, P))(source);\n}\n\n\n\nexport default last;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/last.js\n **/","import {createPropertyConstructor} from './common';\nimport {M_NULL} from '../constants/common';\n\n\nconst mixin = {\n    init({fn, seed}) {\n        this._fn = fn;\n        this._seed = seed;\n        if (seed !== M_NULL) {\n            this.emitValue(seed);\n        }\n    },\n\n    _free() {\n        this._seed = null;\n        this._fn = null;\n    },\n\n    _handleValue(val) {\n        const fn = this._fn;\n        if (this._currentEvent !== null) {\n            this.emitValue(fn(this._currentEvent.value, val));\n        } else {\n            this.emitValue(this._seed === M_NULL ? val : fn(this._seed, val));\n        }\n    }\n};\n\nconst S = createPropertyConstructor('scan', mixin);\n\n\nfunction scan(source, fn, seed = M_NULL) {\n    return new S(source, {fn, seed});\n}\n\n\n\nexport default scan;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/scan.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\n\n\nconst mixin = {\n    init({n}) {\n        this._n = Math.max(0, n);//保证用户输入负数是无效的。\n    },\n\n    _handleValue(x) {\n        if (this._n === 0) {\n            this.emitValue(x);\n        } else {\n            this._n--;\n        }\n    }\n};\n\nconst S = createStreamConstructor('skip', mixin);\nconst P = createPropertyConstructor('skip', mixin);\n\nfunction skip(source, n) {\n    return new (source._ofSameType(S, P))(source, {n});\n}\n\nexport default skip;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/skip.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\n\n\nconst mixin = {\n    init({fn}) {\n        this._fn = fn;\n        this._preventEmit = true;\n    },\n\n    _free() {\n        this._fn = null;\n    },\n\n    _handleValue(x) {\n        if (this._preventEmit === true) {\n            this._preventEmit = this._fn(x);\n        }\n        if (this._preventEmit === false) {\n            this.emitValue(x);\n        }\n    }\n};\n\nconst SkipWhileStream = createStreamConstructor('skipWhile', mixin);\nconst SkipWhileProperty = createPropertyConstructor('skipWhile', mixin);\n\nfunction skipWhile(source, fn) {\n    return new (source._ofSameType(SkipWhileStream, SkipWhileProperty))(source, {fn});\n}\n\nexport default skipWhile;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/skipWhile.js\n **/","import Stream from '../../Stream';\n\nconst pairs = [\n    ['addEventListener', 'removeEventListener'],\n    ['addListener', 'removeListener'],\n    ['on', 'off']\n];\n\nfunction fromSubUnsub(sub, unsub) {\n    return new Stream(function(emitter) {\n        let handler = x => emitter.emit(x);\n\n        sub(handler);\n        return () => unsub(handler);\n    });\n}\n\nexport default function fromEvents(el, eventName) {\n    let sub, unsub;\n    for (let i = 0; i < pairs.length; i++) {\n        if (typeof el[pairs[i][0]] === 'function' && typeof el[pairs[i][1]] === 'function') {\n            sub = pairs[i][0];\n            unsub = pairs[i][1];\n            break;\n        }\n    }\n\n    if (sub === undefined) {\n        throw new Error('el上没有监听事件的方法');\n    }\n    return fromSubUnsub(\n        (handler) => el[sub](eventName, handler),\n        (handler) => el[unsub](eventName, handler)\n    );\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/static/fromEvents.js\n **/","import Stream from '../../Stream';\n\n\nexport default function fromPromise(p) {\n    return new Stream( emitter => {\n        p.then( val => {\n            emitter.emit(val);\n            emitter.end();\n        }, err => {\n            emitter.error(err);\n            emitter.end();\n        })\n    }).toProperty();\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/static/fromPromise.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\nconst mixin = {\n    init({n}) {\n        this._n = n;\n    },\n\n    _handleValue(x) {\n        this._n--;\n        this.emitValue(x);\n        if (this._n === 0) {\n            this.emitEnd();\n        }\n    }\n\n};\n\nconst S = createStreamConstructor('take', mixin);\nconst P = createPropertyConstructor('take', mixin);\n\n\nfunction take(source, n) {\n    return new (source._ofSameType(S, P))(source, {n});\n}\n\n\n\nexport default take;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/take.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\nconst mixin = {\n    init({fn}) {\n        this._fn = fn;\n    },\n\n    _handleValue(x) {\n        if (this._fn(x)) {\n            this.emitValue(x);\n        } else {\n            this.emitEnd();\n        }\n    }\n\n};\n\nconst TakeWhileStream = createStreamConstructor('takeWhile', mixin);\nconst TakeWhileProperty = createPropertyConstructor('takeWhile', mixin);\n\n\nfunction takeWhile(source, fn) {\n    return new (source._ofSameType(TakeWhileStream, TakeWhileProperty))(source, {fn});\n}\n\n\nexport default takeWhile;\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/takeWhile.js\n **/","import { createStreamConstructor } from './common';\nimport {END} from '../constants/events';\nimport now from '../polyfill/now';\n\n\nconst mixin = {\n    init({wait, leading, trailing}) {\n        this._wait = Math.max(0, wait);\n        this._leading = leading;\n        this._trailing = trailing;\n        this._trailingValue = null;\n        this._timeoutId = null;\n        this._endLater = false;\n        this._lastCallTime = 0;\n        this._$trailingCall = () => this._trailingCall();\n    },\n\n    _free() {\n        this._trailingValue = null;\n        this._$trailingCall = null;\n    },\n\n    _handleValue(x) {\n        if (this._activating) {\n            this.emitValue(x);\n        } else {\n            let curTime = now();\n            if (this._lastCallTime === 0 && !this._leading) {\n                this._lastCallTime = curTime;\n            }\n            let remaining = this._wait - (curTime - this._lastCallTime);\n            if (remaining <= 0) {\n                this._cancelTrailing();\n                this._lastCallTime = curTime;\n                this.emitValue(x);\n            } else if (this._trailing) {\n                this._cancelTrailing();\n                this._trailingValue = x;\n                this._timeoutId = setTimeout(this._$trailingCall, remaining);\n            }\n        }\n    },\n\n    _handleEnd() {\n        if (this._activating) {\n            this.emitEnd();\n        } else {\n            if (this._timeoutId) {\n                this._endLater = true;\n            } else {\n                this.emitEnd();\n            }\n        }\n    },\n\n    _cancelTrailing() {\n        if (this._timeoutId !== null) {\n            clearTimeout(this._timeoutId);\n            this._timeoutId = null;\n        }\n    },\n\n    _trailingCall() {\n        this.emitValue(this._trailingValue);\n        this._timeoutId = null;\n        this._trailingValue = null;\n        this._lastCallTime = !this._leading ? 0 : now();\n        if (this._endLater) {\n            this.emitEnd();\n        }\n    }\n};\n\nconst S = createStreamConstructor('throttle', mixin);\n\n\nexport default function throttle(source, wait, leading=true, trailing=true) {\n    return new S(source, { wait, leading, trailing });\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/throttle.js\n **/","import {createTimeBaseStreamConstructor as createTBSConstructor} from '../common';\n\n\nconst DelayStream = createTBSConstructor('delay', {\n\n    init({val}) {\n        this._val = val;\n    },\n\n    _free() {\n        this._val = null;\n    },\n\n    _onTick() {\n        this.emitValue(this._val);\n        this.emitEnd();\n    }\n});\n\nmodule.exports = function delay(wait, val) {\n    return new DelayStream(wait, {val});\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/time/delay.js\n **/","import {createTimeBaseStreamConstructor as createTBSConstructor} from '../common';\n\n\nconst IntervalStream = createTBSConstructor('interval', {\n\n    init({val}) {\n        this._val = val;\n    },\n\n    _free() {\n        this._val = null;\n    },\n\n    _onTick() {\n        this.emitValue(this._val);\n    }\n});\n\nmodule.exports = function interval(wait, val) {\n    return new IntervalStream(wait, {val});\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/time/interval.js\n **/","import {createTimeBaseStreamConstructor as createTBSConstructor} from '../common';\n\n\nconst SeqStream = createTBSConstructor('seq', {\n    init({arr}) {\n        this._d = arr;\n    },\n\n    _free() {\n        this._d = null;\n    },\n\n    _onTick() {\n        if (this._d.length === 1) {\n            this.emitValue(this._d[0]);\n            this.emitEnd();\n        } else {\n            this.emitValue(this._d.shift());\n        }\n    }\n});\n\nmodule.exports = function seq(wait, arr) {\n    return new SeqStream(wait, {arr});\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/time/seq.js\n **/","if (!Function.prototype.bind) {\n  Function.prototype.bind = function(oThis) {\n    if (typeof this !== 'function') {\n      // closest thing possible to the ECMAScript 5\n      // internal IsCallable function\n      throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');\n    }\n\n    var aArgs   = Array.prototype.slice.call(arguments, 1),\n        fToBind = this,\n        fNOP    = function() {},\n        fBound  = function() {\n          return fToBind.apply(this instanceof fNOP\n                 ? this\n                 : oThis,\n                 aArgs.concat(Array.prototype.slice.call(arguments)));\n        };\n\n    if (this.prototype) {\n      // native functions don't have a prototype\n      fNOP.prototype = this.prototype; \n    }\n    fBound.prototype = new fNOP();\n\n    return fBound;\n  };\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/bind.js\n **/","if (!Array.isArray) {\n    Array.isArray = function(arg) {\n        return Object.prototype.toString.call(arg) === '[object Array]';\n    };\n}\n\nexport default function isArray(arr) {\n    return Array.isArray(arr);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/isArray.js\n **/","function isFunction(functionToCheck) {\n    var getType = {};\n    return functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n}\n\nexport default isFunction;\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/isFunction.js\n **/","let slice = [].slice;\nfunction toArray(list, index) {\n    var array = []\n\n    index = index || 0\n\n    for (var i = index || 0; i < list.length; i++) {\n        array[i - index] = list[i]\n    }\n\n    return array;\n}\nexport default toArray;\n\n\n/** WEBPACK FOOTER **\n ** ./src/polyfill/toArray.js\n **/","import Observable from './obserable';\nimport extend from './polyfill/extend';\nimport emitter from './emitter';\n\n\nfunction Stream(fn) {\n    Observable.call(this);\n    this._fn = fn;\n}\n\nStream.prototype = Object.create(Observable.prototype);\n\nextend(Stream.prototype, {\n    _name: 'stream',\n\n    getType() {\n        return 'stream';\n    },\n\n    _onActivation() {\n        const fn = this._fn;\n        const unsubscribe = fn(emitter(this));\n        this._unsubscribe = typeof unsubscribe === 'function' ? unsubscribe : null;\n    },\n\n    _onDeactivation() {\n        this._callUnSub();\n    },\n\n    _callUnSub() {\n        if (this._unsubscribe !== null) {\n            this._unsubscribe();\n            this._unsubscribe = null;\n        }\n    },\n\n    _clear() {\n        Observable.prototype._clear.call(this);\n        this._fn = null;\n    }\n});\n\n\nexport default Stream;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/stream.js\n **/","import Stream from '../Stream';\nimport extend from '../polyfill/extend';\nimport never from '../functions/never';\nimport {VALUE, ANY, END} from '../constants/events';\nimport {forEach, concat, findBy, remove} from '../polyfill/list';\nimport Common from './common';\n\n\n\nfunction Merge(obs) {\n    Common.call(this);\n    this._addAll(obs);\n}\n\nMerge.prototype = Object.create(Common.prototype);\n\nextend(Merge.prototype, {\n    _name: 'merge',\n\n    _onEnd: function () {\n        this.emitEnd();\n    }\n});\n\nmodule.exports = function merge(obs) {\n    return obs.length === 0 ? never() : new Merge(obs);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/merge.js\n **/","import {createStreamConstructor, createPropertyConstructor} from './common';\n\n\n\nconst mixin = {\n    init({fn}) {\n        this._fn = fn;\n    },\n\n    _free() {\n        this._fn = null;\n    },\n\n    _handleError(e) {\n        this.emitError(this._fn(e));\n    }\n};\n\nconst MapErrorStream = createStreamConstructor('mapError', mixin);\nconst MapErrorProperty = createPropertyConstructor('mapError', mixin);\n\nfunction mapError(source, fn) {\n    return new (source._ofSameType(MapErrorStream, MapErrorProperty))(source, {fn});\n}\n\n\n\nexport default mapError;\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/functions/mapError.js\n **/","import merge from './merge';\nimport map from '../functions/map';\nimport mapError from '../functions/mapError';\nimport skipDuplicates from '../functions/skipDuplicates';\nimport toProperty from '../functions/toProperty';\n\n\nconst t = () => true;\nconst f = () => false;\n\nexport default function awaiting(a, b) {\n    b = map(b, f).onError( () => {\n        b.emitValue(false);\n    });\n    let result = merge([map(a, t), b]);\n    result = skipDuplicates(result);\n    result = toProperty(result, f);\n    return result;\n}\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/awaiting.js\n **/","import {createStream, createProperty} from './connectTwoSource';\n\n\nconst mixins = {\n\n    init() {\n        this._buff = [];\n    },\n\n    _free() {\n        this._buff = null;\n    },\n\n    _flush() {\n        if (this._buff) {\n            this.emitValue(this._buff);\n            this._buff = [];\n        }\n    },\n\n\n    _onActivation() {\n        this._mainOb.onAny(this._$handleMainAny);\n        if (this.state.alive && this._secondaryOb) {\n            this._secondaryOb.onAny(this._$handleSecondaryAny);\n        }\n    },\n\n    _handleMainValue(v) {\n        this._buff.push(v);\n    },\n\n    _handleMainEnd() {\n        this._flush();\n        this.emitEnd();\n    },\n\n\n    _handleSecondaryValue(v) {\n        this._flush();\n    },\n\n    _handleSecondaryError(err) {\n        this.emitError(err);\n    }\n};\n\n\nconst P = createProperty('buffer', mixins);\nconst S = createStream('buffer', mixins);\n\nexport default function buffer(mainOb, secondaryOb, options) {\n    return new (mainOb._ofSameType(S, P))(mainOb, secondaryOb, options);\n}\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/buffer.js\n **/","import Stream from '../Stream';\nimport extend from '../polyfill/extend';\nimport never from '../functions/never';\nimport {VALUE, ANY, END} from '../constants/events';\nimport {M_NULL} from '../constants/common';\nimport {forEach, concat, findBy, remove, fill} from '../polyfill/list';\n\n\n\n\nfunction Combine(obs, passive, combinator) {\n    Stream.call(this);\n    this._obsCount = obs.length;\n    this._sources = concat(obs, passive);\n    this._combinator = combinator || (x => x);\n    let len = this._sources.length;\n    this._lastestValues = new Array(len);\n    this._aliveCount = 0;\n    fill(this._lastestValues, M_NULL);\n    this._$handlers = [];\n    forEach(this._sources, (source, i) => {\n        this._$handlers.push((e) => this._handleAny(e, i));\n    });\n}\n\nCombine.prototype = Object.create(Stream.prototype);\n\nextend(Combine.prototype, {\n    _name: 'combine',\n\n    _onActivation () {\n        let sourceLen = this._sources.length;\n        this._aliveCount = this._obsCount;\n        //先处理passive流先, 防止当两个流同一时刻发出的时候（同步），能够保证_emitValueIfReady的正常运行\n        for (let i = this._aliveCount; i < sourceLen; i++) {\n            this._sources[i].onAny(this._$handlers[i]);\n        }\n        for (let i = 0; i < this._aliveCount; i++) {\n            this._sources[i].onAny(this._$handlers[i]);\n        }\n    },\n\n    _onDeactivation() {\n        forEach(this._sources, (source, i) => {\n            source.offAny(this._$handlers[i]);\n        });\n    },\n\n    _handleAny(e, sourceIndex) {\n        let type = e.type;\n        if (type === VALUE) {\n            this._lastestValues[sourceIndex] = e.value;\n            if (this._isBelongToObs(sourceIndex)) {\n                //如果是属于obs流，而不是passive流的话, obsCount之后的坐标都是passive的值了\n                this._emitValueIfReady();\n            }\n        } else if (type === END) {\n            if (this._isBelongToObs(sourceIndex)) {\n                this._aliveCount--;//如果combind([a,b,...])的多个流中，结束的，则_aliveCount--。\n                if (this._aliveCount === 0) {\n                    this.emitEnd();\n                }\n            }\n        }\n    },\n\n    _isBelongToObs(index){\n        return index < this._obsCount;\n    },\n\n    _emitValueIfReady() {\n        var ready = true;\n        forEach(this._lastestValues, (val) => {\n            if (val === M_NULL) {\n                ready = false;\n            }\n        });\n        if (ready) {\n            this.emitValue(this._combinator.apply(this, this._lastestValues));\n        }\n    },\n\n    _clear() {\n        Stream.prototype._clear.call(this);\n        this._sources = null;\n        this._combinator = null\n        this._lastestValues = null;\n        this._$handlers = null;\n    }\n});\n\nmodule.exports = function combine(obs, passive, combinator) {\n    if (typeof passive === 'function') {\n        combinator = passive;\n        passive = [];\n    }\n    if (!combinator) {\n        throw new Error('need combinator for combine');\n    }\n    return obs.length === 0 ? never() : new Combine(obs, passive, combinator);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/combine.js\n **/","import Stream from '../Stream';\nimport Property from '../Property';\nimport extend from '../polyfill/extend';\nimport {VALUE, ERROR, END} from '../constants/events';\n\nconst commonMixin = {\n\n    init() {},\n\n    _free() {},\n\n    _flush() {\n        if (this._buff) {\n            this.emitValue(this._buff);\n            this._buff = [];\n        }\n    },\n\n    _handleMainValue(v) {\n        this.emitValue(v);\n    },\n\n    _handleMainError(err) {\n        this.emitError(err);\n    },\n\n    _handleMainEnd() {\n        this.emitEnd();\n    },\n\n    _handleSecondaryValue(v) {\n        this._lastSecondary = x;\n    },\n\n    _handleSecondaryError(err) {\n        this.emitError(err);\n    },\n\n    _handleSecondaryEnd() {},\n\n    _onActivation() {\n        if (this.state.active) {\n            this._mainOb.onAny(this._$handleMainAny);\n        }\n        if (this._secondaryOb) {\n            this._secondaryOb.onAny(this._$handleSecondaryAny);\n        }\n    },\n\n    _onDeactivation() {\n        this._mainOb.offAny(this._$handleMainAny);\n        /**\n         * NOTE: 这里需要进行判断secondaryOb是否存在，是因为如果secondaryOb先结束\n         * 会进行释放，当前流进行Deactivation的时候，secondaryOb已经不存在了。\n         * 释放的操作在 _handleSecondaryAny 函数中，\n         */\n        if (this._secondaryOb) {\n            this._secondaryOb.offAny(this._$handlerSecondaryAny);\n        }\n    },\n\n    _handleMainAny(e) {\n        switch(e.type) {\n            case VALUE: return this._handleMainValue(e.value);\n            case ERROR: return this._handleMainError(e.value);\n            case END: return this._handleMainEnd(e.value);\n        }\n    },\n\n    _handleSecondaryAny(e) {\n        switch(e.type) {\n            case VALUE: return this._handleSecondaryValue(e.value);\n            case ERROR: return this._handleSecondaryError(e.value);\n            case END:\n                this._handleSecondaryEnd(e.value);\n                // NOTE: 移除secondary observable，处于性能考虑\n                return this._removeSecondaryOb();\n        }\n    },\n\n    _removeSecondaryOb() {\n        if (this._secondaryOb) {\n            this._secondaryOb.offAny(this._$handlerSecondaryAny);\n            this._$handlerSecondaryAny = null;\n            this._secondaryOb = null;\n        }\n    },\n\n    _clear() {\n        Stream.prototype._clear.call(this);\n        this._mainOb = null;\n        this._secondaryOb = null;\n        this._lastSecondary = null;\n        this._$handlerSecondaryAny = null;\n        this._$handleMainAny = null;\n        this._free();\n    }\n}\n\n\nfunction createConstructor(BaseClass, name, userMixins) {\n    function ConnectTwoSource(mainOb, secondaryOb, options) {\n        BaseClass.call(this);\n        this._mainOb = mainOb;\n        this._secondaryOb = secondaryOb;\n        this._name = `${mainOb._name}.name`;\n        this._$handleMainAny = (e) => this._handleMainAny(e);\n        this._$handleSecondaryAny = (e) => this._handleSecondaryAny(e);\n        this.init(options);\n    }\n\n    ConnectTwoSource.prototype = Object.create(BaseClass.prototype);\n    extend(ConnectTwoSource.prototype, commonMixin, userMixins);\n    return ConnectTwoSource;\n}\n\nfunction createStream(name, mixins) {\n    return createConstructor(Stream, name, mixins);\n}\n\nfunction createProperty(name, mixins) {\n    return createConstructor(Property, name, mixins);\n}\n\nexport { createStream, createProperty};\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/connectTwoSource.js\n **/","import Stream from '../Stream';\nimport extend from '../polyfill/extend';\nimport never from '../functions/never';\nimport {VALUE, ANY, END, ERROR} from '../constants/events';\nimport {forEach, concat, fill, map} from '../polyfill/list';\nimport spread from '../utils/spread';\n\n\nfunction Zip(obs, combinator) {\n    Stream.call(this);\n\n    this._sources = obs;\n    this._buffers = map(this._sources, source => []);\n    this._combinator = combinator ? spread(combinator) : (x => x);\n    this._$handlers = [];\n    this._aliveCount = 0;\n    forEach(this._sources, (source, i) => {\n        this._$handlers.push((e) => this._handleAny(e, i));\n    });\n}\n\nZip.prototype = Object.create(Stream.prototype);\n\nextend(Zip.prototype, {\n\n    _name: 'zip',\n\n    _onActivation () {\n        let sourceLen = this._sources.length;\n        this._aliveCount = sourceLen;\n        for (let i = 0; i < sourceLen; i++) {\n            this._sources[i].onAny(this._$handlers[i]);\n        }\n    },\n\n    _onDeactivation() {\n        forEach(this._sources, (source, i) => {\n            source.offAny(this._$handlers[i]);\n        });\n    },\n\n    _handleAny(e, sourceIndex) {\n        let type = e.type;\n        if (type === VALUE) {\n            this._buffers[sourceIndex].push(e.value);\n            this._emitValueIfReady();\n        } else if (type === ERROR) {\n            this.emitError(e.value);\n        } else if (type === END) {\n            this._aliveCount--;\n            if (this._aliveCount === 0) {\n                this.emitEnd();\n            }\n        }\n    },\n\n    _emitValueIfReady() {\n        var isReady = true;\n        forEach(this._buffers, buffer => {\n            isReady = isReady && buffer.length > 0\n        });\n        if (isReady) {\n            this._emit();\n        }\n    },\n\n    _emit() {\n        let values = map(this._buffers, buffer => buffer.shift());\n        this.emitValue(this._combinator(values));\n    },\n\n    _clear() {\n        Stream.prototype._clear.call(this);\n        this._sources = null;\n        this._combinator = null\n        this._buffers = null;\n        this._$handlers = null;\n    }\n});\n\nmodule.exports = function combine(obs, combinator) {\n    return obs.length === 0 ? never() : new Zip(obs, combinator);\n};\n\n\n/** WEBPACK FOOTER **\n ** ./src/connect/zip.js\n **/","module.exports = function spread(fn) {\n    return function (values) { return fn.apply(null, values);}\n};\n\n\n\n\n/** WEBPACK FOOTER **\n ** ./src/utils/spread.js\n **/"],"sourceRoot":""}